import{d as h,a as R,b as z,c as B,V as M}from"./VBadge-C4cDh5dF.js";import{_ as O,d as $,u as j,e as G,b as K,f as u,j as P,a9 as X,O as Y,A as w,o as c,w as t,a as e,ab as J,k as V,t as k,l as a,s as Q,v as D,p as W,D as Z,n as F,m as A,z as y,c as aa,F as ea,y as ta,B as sa,R as ra,V as la,S as oa,G as na,cz as ua}from"./index-D0_VvR3J.js";import{u as ia}from"./user-maltidi9.js";import{V as g}from"./VRow-T4pZZsdz.js";import{V as d}from"./VCol-B5VJ-k2B.js";import{V as da}from"./VForm-ZCkSOZOI.js";import{V as x}from"./VTextField-BDhl3HoB.js";import{V as ma}from"./VChip-Bl_XNOgC.js";import{T}from"./index-9_CLTx8V.js";import"./axios-B3QxYxjQ.js";/* empty css              */import"./VInput-CQ0d1937.js";import"./index-BYTG7FXw.js";import"./VTooltip-DeNPgE8E.js";const E="/assets/avatar-1-full-EwAxu6bC.png",ca="/assets/avatar-2-full-DHXcFOL3.png",fa="/assets/avatar-3-full-DES7Kaw2.png",pa="/assets/avatar-4-full-C4gDU_YO.png",va={class:"card-header"},wa={class:"form-container"},Va={__name:"index",setup(ga){const f=$(),H=j(),{mobile:p}=G(),{t:l}=K(),s=u({username:f.userInfo.username,nickname:f.userInfo.nickname,avatar:f.userInfo.avatar,password:""}),m=u(),i=u(),L={1:h,2:B,3:z,4:R},U=o=>L[o],C=u(),v=u(!1),q={username:[o=>o?!0:l("platform.user.form.username.required")],nickname:[o=>o?!0:l("platform.user.form.nickname.required")],password:[o=>o?!0:l("platform.user.form.password.required")]},_=u(!1),N=async()=>{const{valid:o}=await C.value.validate();if(!o)return;_.value=!0;const n={username:s.value.username,nickname:s.value.nickname,avatar:s.value.avatar,password:oa(s.value.password)};ia.myself.put(n).then(async r=>{na(r.message),await ua(3e3),await f.clearStore(),await H.push("/dashboard")}).finally(()=>{_.value=!1})},I=u(window.innerHeight),S=()=>{I.value=window.innerHeight},b=()=>Math.max(2,Math.floor(I.value-120));return P(async()=>{window.addEventListener("resize",S)}),X(()=>{window.removeEventListener("resize",S)}),Y(()=>s.value.avatar,()=>{switch(s.value.avatar){case"1":m.value=h,i.value=E;break;case"2":m.value=B,i.value=ca;break;case"3":m.value=z,i.value=fa;break;case"4":m.value=R,i.value=pa;break;default:m.value=h,i.value=E}},{immediate:!0}),(o,n)=>(c(),w(la,{height:b()},{default:t(()=>[e(J,null,{default:t(()=>[V("div",va,[V("span",null,k(a(l)("profile.title")),1),e(Q,{loading:a(_),onClick:N},{default:t(()=>[D(k(a(l)("profile.submit")),1)]),_:1},8,["loading"])])]),_:1}),e(W,{class:"mx-4 mt-4"},{default:t(()=>[e(g,null,{default:t(()=>[a(p)?Z("",!0):(c(),w(d,{key:0,cols:"12",md:"6"},{default:t(()=>[V("div",{class:"fcc",style:F({height:b()-54+"px"})},[e(A,{src:a(i),height:"356",width:"178"},null,8,["src"])],4)]),_:1})),e(d,{cols:"12",md:"6",style:F({height:b()-54+"px"}),class:"d-flex justify-center align-center"},{default:t(()=>[V("div",wa,[e(da,{ref_key:"userInfoRef",ref:C},{default:t(()=>[e(x,{modelValue:a(s).username,"onUpdate:modelValue":n[0]||(n[0]=r=>a(s).username=r),disabled:"",label:a(l)("profile.username"),class:"mb-8"},null,8,["modelValue","label"]),e(x,{modelValue:a(s).nickname,"onUpdate:modelValue":n[1]||(n[1]=r=>a(s).nickname=r),label:a(l)("profile.nickname"),class:"mb-8"},null,8,["modelValue","label"]),e(g,{class:"mb-8"},{default:t(()=>[e(d,{cols:a(p)?4:2,class:"d-flex align-center"},{default:t(()=>[e(g,null,{default:t(()=>[e(d,null,{default:t(()=>[y((c(),w(ma,null,{default:t(()=>[D(k(a(l)("platform.user.form.avatar.title")),1)]),_:1})),[[T,a(l)("platform.user.form.avatar.tip")]])]),_:1})]),_:1})]),_:1},8,["cols"]),e(d,{cols:a(p)?8:10},{default:t(()=>[e(g,null,{default:t(()=>[(c(),aa(ea,null,ta(4,r=>e(d,{key:r,cols:a(p)?6:3},{default:t(()=>[e(M,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success","model-value":a(s).avatar===r.toString()},{default:t(()=>[y((c(),w(sa,{color:"primary",variant:"tonal",onClick:_a=>a(s).avatar=r.toString()},{default:t(()=>[e(A,{src:U(r)},null,8,["src"])]),_:2},1032,["onClick"])),[[ra]])]),_:2},1032,["model-value"])]),_:2},1032,["cols"])),64))]),_:1})]),_:1},8,["cols"])]),_:1}),y(e(x,{modelValue:a(s).password,"onUpdate:modelValue":n[2]||(n[2]=r=>a(s).password=r),"append-inner-icon":a(v)?"ri-eye-off-line":"ri-eye-line",type:a(v)?"text":"password",autocomplete:"password",label:a(l)("platform.user.form.password.title"),rules:q.password,clearable:"","onClick:appendInner":n[3]||(n[3]=r=>v.value=!a(v))},null,8,["modelValue","append-inner-icon","type","label","rules"]),[[T,a(l)("platform.user.form.password.tip")]])]),_:1},512)])]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["height"]))}},Ta=O(Va,[["__scopeId","data-v-accbc606"]]);export{Ta as default};
