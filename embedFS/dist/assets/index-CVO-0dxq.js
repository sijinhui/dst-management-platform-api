import{_ as gl}from"./ConfirmBox-qQUgNQN6.js";import{_ as yl}from"./Result-gWT-ossO.js";import{f as c,g as kl,d as _l,e as wl,b as Cl,i as He,a7 as Vl,j as xl,a8 as Il,a9 as $l,aa as ql,c as R,l as e,o as s,A as i,F as N,a,w as l,V as T,ab as P,v as n,t as r,p as D,z as y,s as b,Z as Dl,x as F,q as Ul,C as te,ac as K,ad as Ke,U as Ve,W as xe,J as ce,D as M,ae as Je,m as Sl,k,af as Ie,ag as Ye,y as $e,ah as Ze,G as qe}from"./index-D0_VvR3J.js";import{h as J}from"./axios-B3QxYxjQ.js";import{c as me}from"./colors-DoZdCu1D.js";import{m as Tl}from"./mod-CZ879SoE.js";import{M as Pl}from"./preview-CwSUJBLr.js";import{V as v}from"./VCol-B5VJ-k2B.js";import{V as g}from"./VRow-T4pZZsdz.js";import{V as f}from"./VChip-Bl_XNOgC.js";import{T as _}from"./index-9_CLTx8V.js";import{V as E}from"./VDialog-laDXRq-G.js";import{V as Fl}from"./VForm-ZCkSOZOI.js";import{V as Qe}from"./VAlert-Cnu_GEOX.js";import{V as De}from"./VTextField-BDhl3HoB.js";import{V as Ll}from"./VNumberInput-ChTB30Zu.js";import{V as O}from"./VSpacer-BWidqFwK.js";import{V as Xe}from"./VDataTable-DH4Ujgw6.js";import{V as el}from"./VMenu-gAht7neB.js";import{V as ll}from"./VList-B7_QlUC1.js";import{V as Ml}from"./VSkeletonLoader-DlxWhbhq.js";import{V as Al}from"./VTooltip-DeNPgE8E.js";import{V as al}from"./VSparkline-kkycS52a.js";import{V as Ue,a as Y}from"./VRadioGroup-BFGVeut_.js";import{V as fe}from"./VSelect-DehtkG2o.js";import{V as Rl}from"./VSwitch-CIENX7Ym.js";import"./VContainer-BdgJJao2.js";/* empty css              */import"./index-BYTG7FXw.js";import"./dialog-transition-Bnn_UDo8.js";import"./VInput-CQ0d1937.js";import"./VPagination-_V6tKqvs.js";import"./VCheckboxBtn-DD1lUkrO.js";import"./VSelectionControl-KRPi77qu.js";import"./VTable-CvulZgfR.js";import"./filter-ujihALSj.js";import"./ssrBoot-CVvmSRtT.js";const W={exec:{game:{url:"/dashboard/exec/game",post:async function(U){return await J.post(this.url,U)}}},info:{base:{url:"/dashboard/info/base",get:async function(U){return await J.get(this.url,U)}},sys:{url:"/dashboard/info/sys",get:async function(U){return await J.get(this.url,U)}}},connectionCode:{url:"/dashboard/connection_code",get:async function(U){return await J.get(this.url,U)},put:async function(U){return await J.put(this.url,U)}},check:{lobby:{url:"/dashboard/check/lobby",post:async function(U){return await J.post(this.url,U)}}}},Nl={class:"d-flex align-center justify-center fill-height"},Ol={class:"fcc"},zl={class:"ml-2"},El={class:"d-flex align-center justify-center"},Wl={class:"mr-2 ml-1"},Gl={class:"ml-2"},Bl={class:"d-flex flex-column align-center justify-center"},jl={class:"d-flex flex-column align-center justify-center"},Ua={__name:"index",setup(U){const Se=c(window.innerHeight),x=kl(),Te=_l(),{mobile:L}=wl(),{t}=Cl(),m=c(),pe=c(),Z=c(0),be=async()=>{if(x.room.id===0)return;const u={roomID:x.room.id},d=await W.info.base.get(u);m.value=d.data},C=c(),Pe=["#f72047","#ffd200","#1feaea"],ve=c(Array(30).fill(0)),he=c(Array(30).fill(0)),Fe=async()=>{if(x.room.id===0)return;const u=await W.info.sys.get();if(!u.data)return;const d=Number(u.data.cpu)||0,h=Number(u.data.memory)||0;C.value={...u.data,cpu:d,memory:h},ve.value=[...ve.value.slice(1),d],he.value=[...he.value.slice(1),h]},p=c({startup:{visible:!1,loading:!1},shutdown:{visible:!1,loading:!1},restart:{visible:!1,loading:!1},clean:{visible:!1,loading:!1},rollback:{visible:!1,loading:!1}}),tl=[{title:t("dashboard.card5.worldName"),value:"worldName"},{title:t("dashboard.card5.isMaster"),value:"isMaster"},{title:"CPU",value:"cpu"},{title:t("dashboard.card5.mem"),value:"mem"},{title:t("dashboard.card5.disk"),value:"disk"},{title:t("dashboard.card5.status"),value:"status",minWidth:100}],ge=c(!1),I=u=>{const d={type:u.type,roomID:x.room.id,worldID:u.worldID,extra:u.extra};ge.value=!0,Object.keys(p.value).forEach(h=>{p.value[h].loading=!0}),W.exec.game.post(d).then(h=>{qe(h.message),Object.keys(p.value).forEach(H=>{p.value[H].visible=!1})}).finally(()=>{Object.keys(p.value).forEach(h=>{p.value[h].loading=!1}),ge.value=!1,be()})},Q=c(""),$=c({worlds:[],selectedWorldID:void 0,cmd:""}),G=c(!1),X=c("frontend"),B=c(!1),oe=c("reset-no-force"),Le=c(),de=c(!1),ye=c(!1),Me=c([]),ol=async()=>{ye.value=!0;const u={roomID:x.room.id,worldID:m.value.worlds[0].id},d=await Tl.setting.enabledMods.get(u);Me.value=d.data,ye.value=!1},dl=[{key:"preview_url",title:t("game.mod.add.preview")},{key:"name",title:t("game.mod.add.name")},{key:"serverSize",title:t("game.mod.add.size")},{key:"id",title:"ID"}],ke=c(!1),_e=c(""),we=()=>{if(x.room.id===0)return;ke.value=!0;const u={roomID:x.room.id};W.connectionCode.get(u).then(d=>{_e.value=d.data}).finally(()=>{ke.value=!1})},z=c(!1),Ae=c(),j=c({id:"",port:void 0}),Re=c({ip:[u=>u?!0:t("dashboard.card1.item.custom.ip.required")],port:[u=>u?!0:t("dashboard.card1.item.custom.port.required")]}),re=c(!1),rl=async()=>{const{valid:u}=await Ae.value.validate();if(!u)return;re.value=!0;const d={roomID:x.room.id,ip:j.value.ip,port:j.value.port},h=await W.connectionCode.put(d);re.value=!1,z.value=!1,qe(h.message),we()},nl=()=>{re.value=!0;const u={roomID:x.room.id,ip:"",port:0};W.connectionCode.put(u).then(d=>{z.value=!1,qe(d.message),we()}).finally(()=>{re.value=!1})},Ne=c(!1),ne=c(!1),sl=[{label:"ap-southeast-1",value:"ap-southeast-1"},{label:"ap-east-1",value:"ap-east-1"},{label:"us-east-1",value:"us-east-1"},{label:"eu-central-1",value:"eu-central-1"}],se=c(["ap-southeast-1","ap-east-1"]),Oe=(u=!1)=>{if(u)return;ne.value=!0;const d={gameName:m.value.room.gameName,maxPlayer:m.value.room.maxPlayer,regions:se.value};W.check.lobby.post(d).then(h=>{Ne.value=h.data}).finally(()=>{ne.value=!1})},ee=c(!1),il=He(()=>x.theme),le=c("player"),q=c(),V=c(""),A=c(),w=c(""),ul=[{label:t("dashboard.card3.quickCmd.playerOptions.godmode"),value:0},{label:t("dashboard.card3.quickCmd.playerOptions.buildermode"),value:1},{label:t("dashboard.card3.quickCmd.playerOptions.invisiblemode"),value:2},{label:t("dashboard.card3.quickCmd.playerOptions.oneattacktokill"),value:3},{label:t("dashboard.card3.quickCmd.playerOptions.unlockalltech"),value:4},{label:t("dashboard.card3.quickCmd.playerOptions.movingspeed4"),value:5},{label:t("dashboard.card3.quickCmd.playerOptions.reselectcharacter"),value:6},{label:t("dashboard.card3.quickCmd.playerOptions.respawn"),value:7},{label:t("dashboard.card3.quickCmd.playerOptions.mapclear"),value:8}],cl=()=>{if(!/^KU_/.test(V.value)){koiMsgError(language.value==="zh"?"请输入正确的玩家UID":"Please input the correct player UID");return}q.value===0&&(w.value=`UserToPlayer('${V.value}').components.health:SetInvincible(true)`),q.value===1&&(w.value=`for k, v in pairs(AllPlayers) do if v.userid=='${V.value}' then AllPlayers[k].components.builder:GiveAllRecipes() end end`),q.value===2&&(w.value=`UserToPlayer('${V.value}'):AddTag('debugnoattack')`),q.value===3&&(w.value=`UserToPlayer('${V.value}').components.combat.CalcDamage = function() return 9999999999 * 9 end`),q.value===4&&(w.value=`UserToPlayer('${V.value}').components.builder:UnlockRecipesForTech({SCIENCE = 1, MAGIC = 1, ANCIENT = 1, SHADOW = 1, CARTOGRAPHY = 1})`),q.value===5&&(w.value=`UserToPlayer('${V.value}').components.locomotor:SetExternalSpeedMultiplier(UserToPlayer('${V.value}'), 'c_speedmult', 4)`),q.value===6&&(w.value=`c_despawn(UserToPlayer('${V.value}'))`),q.value===7&&(w.value=`for k, v in pairs(AllPlayers) do if v.userid=='${V.value}' then AllPlayers[k]:PushEvent('respawnfromghost') end end`),q.value===8&&(w.value=`local p=UserToPlayer('${V.value}')if p then local s=2*TheWorld.Map:GetSize()for x=-s,s,32 do for z=-s,s,32 do p.player_classified.MapExplorer:RevealArea(x,0,z)end end end`)},ml=[{label:t("dashboard.card3.quickCmd.worldOptions.rollback6days"),value:0},{label:t("dashboard.card3.quickCmd.worldOptions.skip1day"),value:1},{label:t("dashboard.card3.quickCmd.worldOptions.nextphase"),value:2},{label:t("dashboard.card3.quickCmd.worldOptions.save"),value:3}],fl=()=>{A.value===0&&(w.value="c_rollback(6)"),A.value===1&&(w.value="c_skip(1)"),A.value===2&&(w.value="TheWorld:PushEvent('ms_nextphase')"),A.value===3&&(w.value="c_save()")},pl=()=>{$.value.cmd=w.value,ee.value=!1,w.value="",q.value=void 0,A.value=void 0},bl=He(()=>Vl(x.language)),ze=u=>u>=0&&u<25?"success":u>=25&&u<50?"info":u>=50&&u<75?"warning":u>=75?"error":"primary";let ie=null,ue=null;const vl=()=>{ie=setInterval(()=>{be()},1e4)},hl=()=>{ue=setInterval(()=>{Fe()},2e3)},Ee=()=>{ie&&(clearInterval(ie),ie=null)},We=()=>{ue&&(clearInterval(ue),ue=null)},Ce=Il(()=>{Se.value=window.innerHeight,pe.value&&(Z.value=pe.value.$el.offsetWidth)},200),ae=()=>Math.max(2,Math.floor(Se.value-150)),Ge=c(!1);return xl(async()=>{await Promise.all([be(),Fe()]),Ge.value=!0,we(),$.value.worlds=m.value?.worlds||[],Ce(),window.addEventListener("resize",Ce),vl(),hl()}),$l(()=>{Ee(),We(),window.removeEventListener("beforeunload",Ee),window.removeEventListener("beforeunload",We),window.removeEventListener("resize",Ce)}),(u,d)=>{const h=yl,H=gl,Be=ql("copy");return e(x).gameVersion.local!==0?(s(),R(N,{key:0},[e(x).room.id!==0?(s(),R(N,{key:0},[e(Ge)?(s(),R(N,{key:0},[a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(T,{ref_key:"card1Ref",ref:pe,"min-height":"350"},{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card1.title")),1)]),_:1}),a(D,{class:"mt-8 mb-4"},{default:l(()=>[a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.roomName")),1)]),_:1}),y((s(),i(b,{variant:"text","append-icon":"ri-file-copy-line",class:"text-none"},{default:l(()=>[n(r(e(Dl)(e(m).room.gameName,e(L)?(e(Z)-200)/15:(e(Z)-400)/30)),1)]),_:1})),[[Be,e(m).room.gameName]])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.connectCode")),1)]),_:1}),y(a(b,{loading:e(ke),variant:"text",icon:"ri-file-copy-line"},null,8,["loading"]),[[Be,e(_e)],[_,e(_e)]]),y((s(),i(b,{variant:"text",color:"default",onClick:d[0]||(d[0]=o=>z.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.button")),1)]),_:1})),[[_,e(t)("dashboard.card1.item.custom.tip")]]),a(E,{modelValue:e(z),"onUpdate:modelValue":d[4]||(d[4]=o=>F(z)?z.value=o:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.title")),1)]),_:1}),a(Fl,{ref_key:"customConnectionCodeFormRef",ref:Ae,onSubmit:Ul(rl,["prevent"])},{default:l(()=>[a(D,null,{default:l(()=>[a(Qe,{text:e(t)("dashboard.card1.item.custom.tip"),type:"info",variant:"tonal",class:"mb-8"},null,8,["text"]),y(a(De,{modelValue:e(j).ip,"onUpdate:modelValue":d[1]||(d[1]=o=>e(j).ip=o),rules:e(Re).ip,label:e(t)("dashboard.card1.item.custom.ip.title"),class:"mb-8"},null,8,["modelValue","rules","label"]),[[_,e(t)("dashboard.card1.item.custom.ip.tip")]]),y(a(Ll,{modelValue:e(j).port,"onUpdate:modelValue":d[2]||(d[2]=o=>e(j).port=o),rules:e(Re).port,label:e(t)("dashboard.card1.item.custom.port.title"),min:1,max:65535},null,8,["modelValue","rules","label"]),[[_,e(t)("dashboard.card1.item.custom.port.tip")]])]),_:1}),a(te,{class:"mr-4 mb-4"},{default:l(()=>[a(O),a(b,{variant:"elevated",color:"defalut",onClick:d[3]||(d[3]=o=>z.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),y((s(),i(b,{variant:"elevated",color:"warning",onClick:nl},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.clear.title")),1)]),_:1})),[[_,e(t)("dashboard.card1.item.custom.clear.tip")]]),a(b,{variant:"elevated",color:"primary",type:"submit"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue","width"])]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.cycles")),1)]),_:1}),e(m).session.cycles!==-1?(s(),i(f,{key:0},{default:l(()=>[n(r(e(m).session.cycles),1)]),_:1})):(s(),i(f,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameMode")),1)]),_:1}),a(f,null,{default:l(()=>[n(r(e(t)(`game.base.step1.gameMode.modes.${e(m).room.gameMode}`)),1)]),_:1})]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameSeason")),1)]),_:1}),e(m).session.season!=="error"?(s(),i(f,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.season.${e(m).session.season}`))+"("+r(e(m).session.elapsedDays)+"/"+r(e(m).session.seasonLength[e(m).session.season])+") ",1)]),_:1})):(s(),i(f,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gamePhase")),1)]),_:1}),e(m).session.phase!=="error"?(s(),i(f,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.phase.${e(m).session.phase}`)),1)]),_:1})):(s(),i(f,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length)===0?(s(),i(f,{key:0},{default:l(()=>[n(r(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length),1)]),_:1})):(s(),i(f,{key:1,onClick:d[5]||(d[5]=o=>{de.value=!0,ol()})},{default:l(()=>[n(r(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length),1)]),_:1})),a(E,{modelValue:e(de),"onUpdate:modelValue":d[6]||(d[6]=o=>F(de)?de.value=o:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),e(ye)?(s(),i(D,{key:1},{default:l(()=>[a(h,{type:"info",title:e(t)("game.base.loading"),height:ae()/2},null,8,["title","height"])]),_:1})):(s(),i(D,{key:0},{default:l(()=>[a(Ke,{border:"",rounded:"",class:"mt-4"},{default:l(()=>[a(Xe,{headers:dl,items:e(Me)},{loading:l(()=>[a(Ml,{type:"table-row@10"})]),"item.preview_url":l(({value:o})=>[a(Sl,{src:o,width:100,cover:"",rounded:"","aspect-ratio":"1",class:"ma-2"},{placeholder:l(()=>[k("div",Nl,[a(Ie,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),"item.name":l(({value:o})=>[a(f,{label:"",color:"info"},{default:l(()=>[n(r(o),1)]),_:2},1024)]),"item.serverSize":l(({value:o})=>[a(f,{label:"",color:"primary"},{default:l(()=>[n(r(e(Je)(parseInt(o))),1)]),_:2},1024)]),"item.id":l(({value:o})=>[a(f,{label:""},{default:l(()=>[n(r(o),1)]),_:2},1024)]),"item.update":l(({item:o})=>[o.file_url!==""?(s(),i(f,{key:0,label:""},{default:l(()=>[n(r(e(t)("game.mod.add.notUGC")),1)]),_:1})):M("",!0),o.file_url===""&&o.serverSize===o.localSize?(s(),i(f,{key:1,label:"",color:"success"},{default:l(()=>[n(r(e(t)("game.mod.add.needNoUpdate")),1)]),_:1})):M("",!0),o.file_url===""&&o.serverSize!==o.localSize?(s(),i(f,{key:2,label:"",color:"error"},{default:l(()=>[n(r(e(t)("game.mod.add.needUpdate")),1)]),_:1})):M("",!0)]),"item.actions":l(({item:o})=>[a(b,{color:"info","append-icon":"ri-arrow-drop-down-line",variant:"text"},{default:l(()=>[n(r(e(t)("game.mod.add.actions"))+" ",1),a(el,{activator:"parent"},{default:l(()=>[a(ll,null,{default:l(()=>[a(Ve,{disabled:u.modEnableLoading,class:"text-success",onClick:S=>u.handleModAction("enable",o)},{prepend:l(()=>[a(ce,{icon:"ri-file-check-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.enable")),1)]),_:1})]),_:1},8,["disabled","onClick"]),a(Ve,{disabled:u.modUpdateLoading,class:"text-info",onClick:S=>u.handleModAction("update",o)},{prepend:l(()=>[a(ce,{icon:"ri-arrow-up-circle-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.updateMod")),1)]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(f,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.players")),1)]),_:1}),a(f,null,{default:l(()=>[e(m).players.map(o=>o.nickname).join(", ")!==""?(s(),i(Al,{key:0,activator:"parent"},{default:l(()=>[n(r(e(m).players.map(o=>o.nickname).join(", ")),1)]),_:1})):M("",!0),n(" ("+r(e(m).players?.length||0)+"/"+r(e(m).room.maxPlayer)+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(T,{"min-height":"350"},{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card2.title")),1)]),_:1}),a(D,null,{default:l(()=>[e(L)?(s(),i(g,{key:1,class:"mt-4"},{default:l(()=>[a(v,{cols:"6",class:"fcc",style:{height:"240px"}},{default:l(()=>[a(Ie,{"model-value":e(C).cpu.toFixed(1),size:140,width:10,color:ze(e(C).cpu),rounded:""},{default:l(()=>[k("div",Bl,[d[46]||(d[46]=k("div",null,[k("span",null,"CPU")],-1)),k("div",null,r(e(C).cpu.toFixed(1))+"% ",1)])]),_:1},8,["model-value","color"])]),_:1}),a(v,{cols:"6",class:"fcc",style:{height:"240px"}},{default:l(()=>[a(Ie,{"model-value":e(C).memory.toFixed(1),size:140,width:10,color:ze(e(C).memory),rounded:""},{default:l(()=>[k("div",jl,[k("div",null,[k("span",null,r(e(t)("dashboard.card2.memory")),1)]),k("div",null,r(e(C).memory.toFixed(1))+"% ",1)])]),_:1},8,["model-value","color"])]),_:1})]),_:1})):(s(),i(g,{key:0,class:"mt-4"},{default:l(()=>[a(v,{cols:"12",md:"5"},{default:l(()=>[k("div",null,[k("div",Ol,[a(ce,{icon:"ri-cpu-line"}),d[45]||(d[45]=k("span",{class:"mr-2 ml-1"},"CPU",-1)),a(Ye,{"model-value":e(C).cpu,rounded:"",height:"8",indeterminate:e(C).cpu===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),k("span",zl,r(e(C).cpu.toFixed(1))+"%",1)]),a(al,{width:e(Z)/12*5,height:306-22.5-72,gradient:Pe,"gradient-direction":"top","line-width":3,"model-value":e(ve),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1}),a(O),a(v,{cols:"12",md:"5"},{default:l(()=>[k("div",null,[k("div",El,[a(ce,{icon:"ri-ram-2-line"}),k("span",Wl,r(e(t)("dashboard.card2.memory")),1),a(Ye,{"model-value":e(C).memory,rounded:"",height:"8",indeterminate:e(C).memory===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),k("span",Gl,r(e(C).memory.toFixed(1))+"%",1)]),a(al,{width:e(Z)/12*5,height:306-22.5-72,gradient:Pe,"gradient-direction":"top","line-width":3,"model-value":e(he),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(T,{"min-height":"295"},{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card3.title")),1)]),_:1}),a(D,{class:"mx-4"},{default:l(()=>[a(g,{class:"mt-4"},{default:l(()=>[y((s(),i(b,{class:"mr-4 mb-4",color:"success",onClick:d[7]||(d[7]=o=>e(p).startup.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.startup.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.startup.tip")]]),a(H,{modelValue:e(p).startup.visible,"onUpdate:modelValue":d[8]||(d[8]=o=>e(p).startup.visible=o),type:"info",title:e(t)("dashboard.card3.startup.title"),content:e(t)("dashboard.card3.startup.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).startup.loading,onConfirm:d[9]||(d[9]=o=>I({type:"startup",extra:"all"})),onCancel:d[10]||(d[10]=o=>e(p).startup.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),y((s(),i(b,{class:"mr-4 mb-4",color:"error",onClick:d[11]||(d[11]=o=>e(p).shutdown.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.shutdown.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.shutdown.tip")]]),a(H,{modelValue:e(p).shutdown.visible,"onUpdate:modelValue":d[12]||(d[12]=o=>e(p).shutdown.visible=o),type:"info",title:e(t)("dashboard.card3.shutdown.title"),content:e(t)("dashboard.card3.shutdown.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).shutdown.loading,onConfirm:d[13]||(d[13]=o=>I({type:"shutdown",extra:"all"})),onCancel:d[14]||(d[14]=o=>e(p).shutdown.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),y((s(),i(b,{class:"mr-4 mb-4",color:"warning",onClick:d[15]||(d[15]=o=>e(p).restart.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.restart.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.restart.tip")]]),a(H,{modelValue:e(p).restart.visible,"onUpdate:modelValue":d[16]||(d[16]=o=>e(p).restart.visible=o),type:"info",title:e(t)("dashboard.card3.restart.title"),content:e(t)("dashboard.card3.restart.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).restart.loading,onConfirm:d[17]||(d[17]=o=>I({type:"restart"})),onCancel:d[18]||(d[18]=o=>e(p).restart.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),y((s(),i(b,{class:"mr-4 mb-4",color:"info",disabled:e(Te).userInfo.role!=="admin",loading:e(C).updating,onClick:d[19]||(d[19]=o=>G.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1},8,["disabled","loading"])),[[_,e(t)("dashboard.card3.update.tip")]]),a(E,{modelValue:e(G),"onUpdate:modelValue":d[23]||(d[23]=o=>F(G)?G.value=o:null),width:e(L)?"85%":"40%"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Ue,{modelValue:e(X),"onUpdate:modelValue":d[20]||(d[20]=o=>F(X)?X.value=o:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(f,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.type")),1)]),_:1})]),default:l(()=>[y(a(Y,{label:e(t)("dashboard.card3.update.frontend.title"),value:"frontend"},null,8,["label"]),[[_,e(t)("dashboard.card3.update.frontend.tip")]]),y(a(Y,{label:e(t)("dashboard.card3.update.backend.title"),value:"backend"},null,8,["label"]),[[_,e(t)("dashboard.card3.update.backend.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{color:"default",variant:"elevated",onClick:d[21]||(d[21]=o=>G.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),e(X)==="frontend"?(s(),i(b,{key:0,variant:"elevated",to:"/install"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):M("",!0),e(X)==="backend"?(s(),i(b,{key:1,variant:"elevated",onClick:d[22]||(d[22]=o=>{I({type:"update"}),G.value=!1,e(C).updating=!0})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(g,{class:"mb-4"},{default:l(()=>[y((s(),i(b,{class:"mr-4 mb-4",color:e(me).purple.base,onClick:d[24]||(d[24]=o=>B.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.reset.tip")]]),a(E,{modelValue:e(B),"onUpdate:modelValue":d[28]||(d[28]=o=>F(B)?B.value=o:null),width:e(L)?"85%":"40%"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Ue,{modelValue:e(oe),"onUpdate:modelValue":d[25]||(d[25]=o=>F(oe)?oe.value=o:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(f,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.resetType")),1)]),_:1})]),default:l(()=>[y(a(Y,{label:e(t)("dashboard.card3.reset.noForced.title"),value:"reset-no-force"},null,8,["label"]),[[_,e(t)("dashboard.card3.reset.noForced.tip")]]),y(a(Y,{label:e(t)("dashboard.card3.reset.forced.title"),value:"force"},null,8,["label"]),[[_,e(t)("dashboard.card3.reset.forced.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{color:"default",variant:"elevated",onClick:d[26]||(d[26]=o=>B.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),a(b,{variant:"elevated",onClick:d[27]||(d[27]=o=>{I({type:"reset",extra:e(oe)}),B.value=!1})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),y((s(),i(b,{class:"mr-4 mb-4",color:e(me).brown.base},{default:l(()=>[n(r(e(t)("dashboard.card3.clean.title"))+" ",1),a(el,{activator:"parent"},{default:l(()=>[a(ll,null,{default:l(()=>[(s(!0),R(N,null,$e(e($).worlds,(o,S)=>(s(),i(Ve,{key:S,value:o.id,onClick:je=>{Le.value=o.id,e(p).clean.visible=!0}},{default:l(()=>[a(xe,null,{default:l(()=>[n(r(o.worldName),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.clean.tip")]]),a(H,{modelValue:e(p).clean.visible,"onUpdate:modelValue":d[29]||(d[29]=o=>e(p).clean.visible=o),type:"info",title:e(t)("dashboard.card3.clean.title"),content:e(t)("dashboard.card3.clean.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).clean.loading,onConfirm:d[30]||(d[30]=o=>I({type:"delete",worldID:e(Le)})),onCancel:d[31]||(d[31]=o=>e(p).clean.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),y((s(),i(b,{class:"mr-4 mb-4",color:e(me).cyan.darken1,onClick:d[32]||(d[32]=o=>ee.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.quickCmd.title")),1)]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.quickCmd.tip")]]),a(E,{modelValue:e(ee),"onUpdate:modelValue":d[36]||(d[36]=o=>F(ee)?ee.value=o:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[k("span",null,r(e(t)("dashboard.card3.quickCmd.title")),1),e(V)!==""?(s(),i(f,{key:0,label:"",color:"success",class:"ml-2"},{default:l(()=>[n(r(e(m).players.find(o=>o.uid===e(V)).nickname),1)]),_:1})):M("",!0)]),_:1}),a(D,null,{default:l(()=>[a(g,null,{default:l(()=>[a(v,null,{default:l(()=>[a(Ue,{modelValue:e(le),"onUpdate:modelValue":d[33]||(d[33]=o=>F(le)?le.value=o:null),inline:"",color:"primary",class:"my-4"},{default:l(()=>[a(Y,{label:e(t)("dashboard.card3.quickCmd.player"),value:"player"},null,8,["label"]),a(Y,{label:e(t)("dashboard.card3.quickCmd.world"),value:"world"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,null,{default:l(()=>[(s(!0),R(N,null,$e(e(m).players,o=>(s(),i(b,{variant:"text",class:"mr-2",onClick:S=>V.value=o.uid},{default:l(()=>[n(r(o.nickname),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(q),"onUpdate:modelValue":[d[34]||(d[34]=o=>F(q)?q.value=o:null),cl],disabled:e(V)===""||e(le)!=="player",items:ul,label:e(t)("dashboard.card3.quickCmd.playerCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(L)?M("",!0):(s(),i(O,{key:0}))]),_:1}),a(g,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(A),"onUpdate:modelValue":[d[35]||(d[35]=o=>F(A)?A.value=o:null),fl],disabled:e(le)!=="world",items:ml,label:e(t)("dashboard.card3.quickCmd.worldCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(L)?M("",!0):(s(),i(O,{key:0}))]),_:1}),a(g,null,{default:l(()=>[a(v,null,{default:l(()=>[a(e(Pl),{"model-value":"```lua ::open\n"+e(w),theme:e(il),language:e(bl),"preview-theme":"github",class:"mdp"},null,8,["model-value","theme","language"])]),_:1})]),_:1})]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{variant:"elevated",text:e(t)("dashboard.card3.quickCmd.insert"),onClick:pl},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),y((s(),i(b,{class:"mr-4 mb-4",color:e(me).teal.base},{default:l(()=>[n(r(e(t)("dashboard.card3.check.title"))+" ",1),a(E,{activator:"parent",width:e(L)?"90%":"60%",onAfterEnter:Oe},{default:l(({isActive:o})=>[a(T,{"min-height":"520"},{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card3.check.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(fe,{modelValue:e(se),"onUpdate:modelValue":d[37]||(d[37]=S=>F(se)?se.value=S:null),multiple:"",chips:"",density:"compact",label:e(t)("dashboard.card3.check.region"),class:"mt-8","item-title":"label","item-value":"value",items:sl,disabled:e(ne),"onUpdate:menu":Oe},null,8,["modelValue","label","disabled"]),e(ne)?(s(),i(h,{key:0,height:476,type:"info",title:e(t)("dashboard.card3.check.result.loading.title"),"sub-title":e(t)("dashboard.card3.check.result.loading.subTitle")},null,8,["title","sub-title"])):(s(),R(N,{key:1},[e(Ne)?(s(),i(h,{key:0,height:476,type:"success",title:e(t)("dashboard.card3.check.result.success.title"),"sub-title":e(t)("dashboard.card3.check.result.success.subTitle")},null,8,["title","sub-title"])):(s(),i(h,{key:1,height:476,type:"error",title:e(t)("dashboard.card3.check.result.error.title"),"sub-title":e(t)("dashboard.card3.check.result.error.subTitle")},null,8,["title","sub-title"]))],64))]),_:1})]),_:1})]),_:1},8,["width"])]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.check.tip")]])]),_:1}),a(g,null,{default:l(()=>[y((s(),i(f,{label:"",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card3.rollback.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.rollback.tip")]]),(s(!0),R(N,null,$e(e(L)?[1,2,3,4]:[1,2,3,4,5,6,7,8,9],o=>(s(),i(b,{color:"default",size:"x-small",class:"mr-4 mb-4"},{default:l(()=>[n(r(o)+" ",1),a(E,{activator:"parent","max-width":"500px",persistent:""},{default:l(({isActive:S})=>[a(T,null,{default:l(()=>[a(P,{class:"d-flex align-center"},{default:l(()=>[k("span",null,r(e(t)("dashboard.card3.rollback.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Qe,{text:e(t)("dashboard.card3.rollback.confirm.c1")+o+e(t)("dashboard.card3.rollback.confirm.c2"),type:"info",variant:"tonal"},null,8,["text"])]),_:2},1024),a(te,{class:"pa-4"},{default:l(()=>[a(O),a(b,{variant:"elevated",color:"default",onClick:je=>S.value=!1},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1},8,["onClick"]),a(b,{variant:"elevated",loading:e(p).rollback.loading,onClick:je=>{I({type:"console",extra:`c_rollback(${o})`,worldID:e(m).worlds[0].id}),S.value=!1}},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(T,{"min-height":"295"},{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card4.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(g,{class:"mt-8"},{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(De,{modelValue:e(Q),"onUpdate:modelValue":d[38]||(d[38]=o=>F(Q)?Q.value=o:null),"append-inner-icon":"ri-send-plane-fill",class:"w-100",label:e(t)("dashboard.card4.announce"),clearable:"","onClick:appendInner":d[39]||(d[39]=o=>I({type:"announce",extra:e(Q)})),onKeyup:d[40]||(d[40]=Ze(o=>I({type:"announce",extra:e(Q)}),["enter"]))},null,8,["modelValue","label"])]),_:1})]),_:1}),a(g,{class:"my-8"},{default:l(()=>[a(v,{cols:"12",md:"3"},{default:l(()=>[a(fe,{modelValue:e($).selectedWorldID,"onUpdate:modelValue":d[41]||(d[41]=o=>e($).selectedWorldID=o),label:e(t)("dashboard.card4.world"),class:"mr-1","item-title":"worldName","item-value":"id",items:e($).worlds},null,8,["modelValue","label","items"])]),_:1}),a(v,{cols:"12",md:"9"},{default:l(()=>[a(De,{modelValue:e($).cmd,"onUpdate:modelValue":d[42]||(d[42]=o=>e($).cmd=o),"append-inner-icon":"ri-send-plane-fill",label:e(t)("dashboard.card4.cmd"),clearable:"",disabled:e($).selectedWorldID===void 0,"onClick:appendInner":d[43]||(d[43]=o=>I({type:"console",extra:e($).cmd,worldID:e($).selectedWorldID})),onKeyup:d[44]||(d[44]=Ze(o=>I({type:"console",extra:e($).cmd,worldID:e($).selectedWorldID}),["enter"]))},null,8,["modelValue","label","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(T,null,{default:l(()=>[a(P,null,{default:l(()=>[n(r(e(t)("dashboard.card5.title")),1)]),_:1}),a(D,{class:"my-8"},{default:l(()=>[a(g,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(Ke,{rounded:"",border:""},{default:l(()=>[a(Xe,{items:e(m).worlds,headers:tl,"hide-default-footer":""},{"item.worldName":l(({value:o})=>[a(f,{color:"primary",label:""},{default:l(()=>[n(r(o),1)]),_:2},1024)]),"item.isMaster":l(({value:o})=>[o?(s(),i(f,{key:0,color:"success",label:""},{default:l(()=>[...d[47]||(d[47]=[n(" 是 ",-1)])]),_:1})):(s(),i(f,{key:1,label:""},{default:l(()=>[...d[48]||(d[48]=[n(" 否 ",-1)])]),_:1}))]),"item.cpu":l(({item:o})=>[a(f,{label:"",color:"info"},{default:l(()=>[n(r(o.performanceStatus.cpu.toFixed(2))+"% ",1)]),_:2},1024)]),"item.mem":l(({item:o})=>[a(f,{label:"",color:"info"},{default:l(()=>[n(r(o.performanceStatus.mem.toFixed(2))+"% ("+r(o.performanceStatus.memSize)+" MB) ",1)]),_:2},1024)]),"item.disk":l(({item:o})=>[a(f,{label:"",color:"info"},{default:l(()=>[n(r(e(Je)(o.performanceStatus.disk)),1)]),_:2},1024)]),"item.status":l(({item:o})=>[a(Rl,{modelValue:o.status,"onUpdate:modelValue":S=>o.status=S,loading:e(ge),color:"success","hide-details":"",onChange:S=>o.status?I({type:"startup",worldID:o.id}):I({type:"shutdown",worldID:o.id})},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)):(s(),i(h,{key:1,type:"info",title:e(t)("game.base.loading"),height:ae()},null,8,["title","height"]))],64)):(s(),i(h,{key:1,title:e(t)("global.noRoomSelected.title"),"sub-title":e(t)("global.noRoomSelected.subTitle"),type:"error",height:ae()},{default:l(()=>[a(b,{to:"/rooms",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.noRoomSelected.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(s(),R(N,{key:1},[e(Te).userInfo.role==="admin"?(s(),i(h,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:ae(),type:"error"},{default:l(()=>[a(b,{to:"/install",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(s(),i(h,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:ae(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{Ua as default};
