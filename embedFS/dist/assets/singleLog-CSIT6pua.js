import{_ as N}from"./Result-gWT-ossO.js";import R from"./log-CdWSXfEQ.js";import{g as E,e as F,b as H,f as u,j as T,a8 as j,Q as q,A as c,o,w as l,a,ab as z,k as C,c as v,t as h,l as e,x as B,v as I,p as P,F as U,D as $,s as A,V as Q}from"./index-D0_VvR3J.js";import{l as G}from"./logs-BPuWEDqr.js";import{V as J}from"./VSwitch-CIENX7Ym.js";import{V as K}from"./VChip-Bl_XNOgC.js";import{V as O}from"./VRow-T4pZZsdz.js";import{V as W}from"./VSpacer-BWidqFwK.js";import{V as X}from"./VCol-B5VJ-k2B.js";import{V as Y}from"./VNumberInput-ChTB30Zu.js";import"./VContainer-BdgJJao2.js";/* empty css              */import"./preview-CwSUJBLr.js";import"./axios-B3QxYxjQ.js";import"./index-BYTG7FXw.js";import"./VInput-CQ0d1937.js";import"./VSelectionControl-KRPi77qu.js";import"./VTextField-BDhl3HoB.js";const Z={class:"card-header"},ee={key:0},te={key:1},oe={class:"fcc"},we={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const r=L,M=E(),{mobile:S}=F(),{t:n}=H(),d=u(""),m=u(!0),i=u(0),_=u(!1),y=()=>{const t={roomID:M.room.id,worldID:0,logType:r.type,lines:i.value};G.content.get(t).then(s=>{s.data===null?d.value="":d.value=s.data.join(`
`),_.value=!0})};let p=null;const D=()=>{p=setInterval(()=>{m.value&&y()},2e3)},w=()=>{p&&(clearInterval(p),p=null)},k=()=>{let t=390;return r.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},f=()=>{let t=0;return r.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=u(window.innerHeight),b=j(()=>{g.value=window.innerHeight,i.value=k()},200);return T(async()=>{window.addEventListener("resize",b),i.value=k(),D()}),q(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",b)}),(t,s)=>{const x=N;return o(),c(Q,{height:f(),flat:""},{default:l(()=>[a(z,{class:"my-2"},{default:l(()=>[C("div",Z,[r.chat?(o(),v("span",ee,h(e(n)("logs.current")),1)):(o(),v("span",te,h(e(n)(`logs.${r.type}`)),1)),C("div",oe,[a(J,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=V=>B(m)?m.value=V:null),color:"info","hide-details":""},{prepend:l(()=>[a(K,{color:"info"},{default:l(()=>[I(h(e(n)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),a(P,null,{default:l(()=>[e(_)?(o(),v(U,{key:0},[e(d)?(o(),c(R,{key:0,content:e(d),height:f()-150},null,8,["content","height"])):(o(),c(x,{key:1,type:"info",height:f()-150,title:e(n)("logs.noContent")},null,8,["height","title"]))],64)):(o(),c(x,{key:1,type:"info",title:e(n)("logs.fetching"),height:f()-150},null,8,["title","height"])),a(O,{class:"my-4"},{default:l(()=>[e(S)?$("",!0):(o(),c(W,{key:0})),a(X,{class:"d-flex align-center justify-end"},{default:l(()=>[a(Y,{modelValue:e(i),"onUpdate:modelValue":s[1]||(s[1]=V=>B(i)?i.value=V:null),label:e(n)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),a(A,{onClick:y},{default:l(()=>[I(h(e(n)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{we as default};
