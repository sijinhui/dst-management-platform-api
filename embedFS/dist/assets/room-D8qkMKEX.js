import{_ as Y,e as Z,b as h,j as ee,f as c,aE as le,aF as ae,c as E,o as r,a as l,w as t,z as d,l as e,A as f,D as N,v as g,t as b,s as T,n as te,V as se,ab as oe,k as B,x as F,p as me,F as K,y as ne,C as ue,aG as re,aC as de,G as $}from"./index-D0_VvR3J.js";import{V as v}from"./VRow-T4pZZsdz.js";import{V as i}from"./VCol-B5VJ-k2B.js";import{V as x}from"./VTextField-BDhl3HoB.js";import{T as p}from"./index-9_CLTx8V.js";import{V as P,a as u}from"./VRadioGroup-BFGVeut_.js";import{V as y}from"./VChip-Bl_XNOgC.js";import{V as z}from"./VSlider-DNia88Rt.js";import{V as ie}from"./VNumberInput-ChTB30Zu.js";import{V as pe}from"./VForm-ZCkSOZOI.js";import{V as be}from"./VSpacer-BWidqFwK.js";import{V as fe}from"./VDialog-laDXRq-G.js";/* empty css              */import"./index-BYTG7FXw.js";import"./VInput-CQ0d1937.js";import"./VTooltip-DeNPgE8E.js";import"./VSelectionControl-KRPi77qu.js";import"./dialog-transition-Bnn_UDo8.js";const ge=["󰀆","󰀑","󰀇","󰀃","󰀊","󰀕","󰀭","󰀅","󰀍","󰀘","󰀮","󰀩","󰀠","󰀈","󰀛","󰀋","󰀏","󰀫","󰀝","󰀄","󰀐","󰀓","󰀁","󰀨","󰀣","󰀤","󰀔","󰀂","󰀧","󰀒","󰀦","󰀙","󰀞","󰀡","󰀯","󰀟","󰀗","󰀥","󰀚","󰀪","󰀌","󰀜","󰀬","󰀎","󰀖","󰀉","󰀀","󰀢"],Ve={class:"card-header"},ve={key:0},ce={class:"emoji-container mt-8"},ye=["onClick"],ke={__name:"room",props:{formData:{type:Object,default:()=>({})},roomCount:{type:Number,default:0},maxPlayers:{type:Number,default:0}},setup(L,{expose:H}){const I=L,{mobile:k}=Z(),{t:a}=h();ee(()=>{(I.formData?.id||0)!==0?m.value=I.formData:(m.value.masterPort=I.roomCount+le.masterPort+1,m.value.gameMode="endless",m.value.clusterKey=ae(14),m.value.modInOne=!0)});const A=c(),m=c({id:0,gameName:"",description:"",gameMode:"",customGameMode:"",pvp:!1,maxPlayer:6,maxRollBack:10,modInOne:!1,modData:"",vote:!1,pauseEmpty:!0,password:"",token:"",masterIP:"127.0.0.1",masterPort:0,clusterKey:"",lan:!1,offline:!1,steamGroupOnly:!1,steamGroupID:"",steamGroupAdmins:!1}),G=c({gameName:[n=>n?!0:a("game.base.step1.gameName.required")],customGameMode:[n=>n?!0:a("game.base.step1.gameMode.modes.custom.required")],token:[n=>n?!0:a("game.base.step1.token.required")],masterIP:[n=>n?!0:a("game.base.step1.masterIP.required")],masterPort:[n=>n?!0:a("game.base.step1.masterPort.required")],clusterKey:[n=>n?!0:a("game.base.step1.clusterKey.required")]}),D=c(!1),R=c(!1),j=c(!1),J=()=>{m.value.token=re()},C=c(!1),M=c(!0),_=c(!1),S=c(),q=c(),O=c(0),Q=n=>{if(M.value){let s,o;if(C.value){if(s=S.value?.$el.querySelector("input"),!s)return;o=m.value.gameName}else{if(s=q.value?.$el.querySelector("input"),!s)return;o=m.value.description}const w=s.selectionStart||O.value,U=s.selectionEnd||O.value;C.value?m.value.gameName=o.substring(0,w)+n+o.substring(U):m.value.description=o.substring(0,w)+n+o.substring(U);const V=w+n.length;O.value=V,de(()=>{s.setSelectionRange(V,V),s.focus()})}else W(n).then(()=>{$("复制成功"),_.value=!1}).catch(()=>{$("复制失败","error")})};function W(n,s,o){return new Promise((w,U)=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(n).then(()=>{w(n)}).catch(V=>{U(V)});else try{const V=document.createElement("textarea");V.value=n,V.style.position="fixed",V.style.opacity="0",document.body.appendChild(V),V.select();const X=document.execCommand("copy");if(document.body.removeChild(V),X)w(n);else throw new Error("复制失败，execCommand返回false")}catch(V){U(V)}})}return H({validate:async()=>{const{valid:n}=await A.value.validate();return n?{validate:!0,formData:m.value}:{validate:!1,formData:{}}}}),(n,s)=>(r(),E(K,null,[l(pe,{ref_key:"roomFormRef",ref:A},{default:t(()=>[l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[d(l(x,{modelValue:e(m).gameName,"onUpdate:modelValue":s[0]||(s[0]=o=>e(m).gameName=o),rules:e(G).gameName,label:e(a)("game.base.step1.gameName.name"),"append-inner-icon":"ri-emotion-happy-line","onClick:appendInner":s[1]||(s[1]=o=>{_.value=!0,C.value=!0})},null,8,["modelValue","rules","label"]),[[p,e(a)("game.base.step1.gameName.tip")]])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[d(l(x,{modelValue:e(m).description,"onUpdate:modelValue":s[2]||(s[2]=o=>e(m).description=o),label:e(a)("game.base.step1.description.name"),"append-inner-icon":"ri-emotion-happy-line","onClick:appendInner":s[3]||(s[3]=o=>{_.value=!0,C.value=!1})},null,8,["modelValue","label"]),[[p,e(a)("game.base.step1.description.tip")]])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[l(P,{modelValue:e(m).gameMode,"onUpdate:modelValue":s[5]||(s[5]=o=>e(m).gameMode=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.gameMode.name")),1)]),_:1})),[[p,e(a)("game.base.step1.gameMode.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.gameMode.modes.endless"),value:"endless",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.survival"),value:"survival",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.relaxed"),value:"relaxed",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.wilderness"),value:"wilderness",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.lightsOut"),value:"lightsOut",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.lavaarena"),value:"lavaarena",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.quagmire"),value:"quagmire",class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.gameMode.modes.custom.name"),value:"custom",class:"mr-4"},null,8,["label"]),e(m).gameMode==="custom"?(r(),f(x,{key:0,modelValue:e(m).customGameMode,"onUpdate:modelValue":s[4]||(s[4]=o=>e(m).customGameMode=o),rules:e(G).customGameMode,label:e(a)("game.base.step1.gameMode.modes.custom.label")},null,8,["modelValue","rules","label"])):N("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[l(z,{modelValue:e(m).maxPlayer,"onUpdate:modelValue":s[6]||(s[6]=o=>e(m).maxPlayer=o),max:I.maxPlayers===0?64:I.maxPlayers,min:1,class:"align-center","hide-details":"",step:"1",style:{"margin-left":"-1px"}},{label:t(()=>[d((r(),f(y,{style:{"margin-right":"1rem"}},{default:t(()=>[g(b(e(a)("game.base.step1.maxPlayer.name")),1)]),_:1})),[[p,e(a)("game.base.step1.maxPlayer.tip")]])]),append:t(()=>[l(y,{label:"",color:"primary"},{default:t(()=>[g(b(e(m).maxPlayer),1)]),_:1})]),_:1},8,["modelValue","max"])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,{cols:e(k)?12:4},{default:t(()=>[l(P,{modelValue:e(m).pvp,"onUpdate:modelValue":s[7]||(s[7]=o=>e(m).pvp=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.pvp.name")),1)]),_:1})),[[p,e(a)("game.base.step1.pvp.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.pvp.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.pvp.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"]),l(i,{cols:e(k)?12:4},{default:t(()=>[l(P,{modelValue:e(m).vote,"onUpdate:modelValue":s[8]||(s[8]=o=>e(m).vote=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.vote.name")),1)]),_:1})),[[p,e(a)("game.base.step1.vote.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.vote.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.vote.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"]),l(i,{cols:e(k)?12:4},{default:t(()=>[l(P,{modelValue:e(m).pauseEmpty,"onUpdate:modelValue":s[9]||(s[9]=o=>e(m).pauseEmpty=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.pauseEmpty.name")),1)]),_:1})),[[p,e(a)("game.base.step1.pauseEmpty.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.pauseEmpty.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.pauseEmpty.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"])]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[l(z,{modelValue:e(m).maxRollBack,"onUpdate:modelValue":s[10]||(s[10]=o=>e(m).maxRollBack=o),max:64,min:1,class:"align-center","hide-details":"",step:"1",style:{"margin-left":"-1px"}},{label:t(()=>[d((r(),f(y,{style:{"margin-right":"1rem"}},{default:t(()=>[g(b(e(a)("game.base.step1.maxRollBack.name")),1)]),_:1})),[[p,e(a)("game.base.step1.maxRollBack.tip")]])]),append:t(()=>[l(y,{label:"",color:"primary"},{default:t(()=>[g(b(e(m).maxRollBack),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[d(l(x,{modelValue:e(m).password,"onUpdate:modelValue":s[11]||(s[11]=o=>e(m).password=o),autocomplete:"new-password",label:e(a)("game.base.step1.password.name"),"append-inner-icon":e(D)?"ri-eye-off-line":"ri-eye-line",type:e(D)?"text":"password","onClick:appendInner":s[12]||(s[12]=o=>D.value=!e(D))},null,8,["modelValue","label","append-inner-icon","type"]),[[p,e(a)("game.base.step1.password.tip")]])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,{class:"fcc"},{default:t(()=>[d(l(x,{modelValue:e(m).token,"onUpdate:modelValue":s[13]||(s[13]=o=>e(m).token=o),rules:e(G).token,label:e(a)("game.base.step1.token.name"),"append-inner-icon":e(R)?"ri-eye-off-line":"ri-eye-line",type:e(R)?"text":"password",class:"w-100","onClick:appendInner":s[14]||(s[14]=o=>R.value=!e(R))},null,8,["modelValue","rules","label","append-inner-icon","type"]),[[p,e(a)("game.base.step1.token.tip")]]),e(k)?N("",!0):(r(),f(T,{key:0,density:"comfortable",variant:"text",class:"ml-4",color:"success","prepend-icon":"ri-add-line",onClick:J},{default:t(()=>[g(b(e(a)("game.base.step1.token.buttonAdd")),1)]),_:1})),e(k)?N("",!0):(r(),f(T,{key:1,density:"comfortable",variant:"text",class:"ml-4",color:"info",href:"https://accounts.klei.com",target:"_blank","prepend-icon":"ri-links-line"},{default:t(()=>[g(b(e(a)("game.base.step1.token.buttonUrl")),1)]),_:1}))]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,{cols:e(k)?12:9,style:te(e(k)?{marginBottom:"1.25rem"}:{})},{default:t(()=>[d(l(x,{modelValue:e(m).masterIP,"onUpdate:modelValue":s[15]||(s[15]=o=>e(m).masterIP=o),rules:e(G).masterIP,label:e(a)("game.base.step1.masterIP.name")},null,8,["modelValue","rules","label"]),[[p,e(a)("game.base.step1.masterIP.tip")]])]),_:1},8,["cols","style"]),l(i,{cols:e(k)?12:3},{default:t(()=>[d(l(ie,{modelValue:e(m).masterPort,"onUpdate:modelValue":s[16]||(s[16]=o=>e(m).masterPort=o),rules:e(G).masterPort,label:e(a)("game.base.step1.masterPort.name"),min:1,max:65535,style:{"margin-bottom":"-1.25rem"}},null,8,["modelValue","rules","label"]),[[p,e(a)("game.base.step1.masterPort.tip")]])]),_:1},8,["cols"])]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[d(l(x,{modelValue:e(m).clusterKey,"onUpdate:modelValue":s[17]||(s[17]=o=>e(m).clusterKey=o),rules:e(G).clusterKey,label:e(a)("game.base.step1.clusterKey.name"),"append-inner-icon":e(j)?"ri-eye-off-line":"ri-eye-line",type:e(j)?"text":"password","onClick:appendInner":s[18]||(s[18]=o=>j.value=!e(j))},null,8,["modelValue","rules","label","append-inner-icon","type"]),[[p,e(a)("game.base.step1.clusterKey.tip")]])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,{cols:"12",md:"6"},{default:t(()=>[l(P,{modelValue:e(m).lan,"onUpdate:modelValue":s[19]||(s[19]=o=>e(m).lan=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.lan.name")),1)]),_:1})),[[p,e(a)("game.base.step1.lan.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.lan.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.lan.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:t(()=>[l(P,{modelValue:e(m).offline,"onUpdate:modelValue":s[20]||(s[20]=o=>e(m).offline=o),inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.offline.name")),1)]),_:1})),[[p,e(a)("game.base.step1.offline.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.offline.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.offline.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,null,{default:t(()=>[d(l(x,{modelValue:e(m).steamGroupID,"onUpdate:modelValue":s[21]||(s[21]=o=>e(m).steamGroupID=o),label:e(a)("game.base.step1.steamGroupID.name")},null,8,["modelValue","label"]),[[p,e(a)("game.base.step1.steamGroupID.tip")]])]),_:1})]),_:1}),l(v,null,{default:t(()=>[l(i,{cols:"12",md:"6"},{default:t(()=>[l(P,{modelValue:e(m).steamGroupOnly,"onUpdate:modelValue":s[22]||(s[22]=o=>e(m).steamGroupOnly=o),disabled:e(m).steamGroupID==="",inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.steamGroupOnly.name")),1)]),_:1})),[[p,e(a)("game.base.step1.steamGroupOnly.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.steamGroupOnly.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.steamGroupOnly.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),_:1}),l(i,{cols:"12",md:"6"},{default:t(()=>[l(P,{modelValue:e(m).steamGroupAdmins,"onUpdate:modelValue":s[23]||(s[23]=o=>e(m).steamGroupAdmins=o),disabled:e(m).steamGroupID==="",inline:""},{prepend:t(()=>[d((r(),f(y,null,{default:t(()=>[g(b(e(a)("game.base.step1.steamGroupAdmins.name")),1)]),_:1})),[[p,e(a)("game.base.step1.steamGroupAdmins.tip")]])]),default:t(()=>[l(u,{label:e(a)("game.base.step1.steamGroupAdmins.enable"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.steamGroupAdmins.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1},512),l(fe,{modelValue:e(_),"onUpdate:modelValue":s[27]||(s[27]=o=>F(_)?_.value=o:null),width:e(k)?"90%":"60%"},{default:t(()=>[l(se,null,{default:t(()=>[l(oe,null,{default:t(()=>[B("div",Ve,[B("div",null,b(e(a)("game.base.step1.emoji.title")),1),B("div",null,[l(P,{modelValue:e(M),"onUpdate:modelValue":s[24]||(s[24]=o=>F(M)?M.value=o:null),inline:""},{default:t(()=>[l(u,{label:e(a)("game.base.step1.emoji.insert"),value:!0,class:"mr-4"},null,8,["label"]),l(u,{label:e(a)("game.base.step1.emoji.copy"),value:!1},null,8,["label"])]),_:1},8,["modelValue"])])])]),_:1}),l(me,{class:"mt-4"},{default:t(()=>[e(M)?(r(),E("div",ve,[e(C)?(r(),f(x,{key:0,ref_key:"emojiInputNameRef",ref:S,modelValue:e(m).gameName,"onUpdate:modelValue":s[25]||(s[25]=o=>e(m).gameName=o),label:e(a)("game.base.step1.gameName.name")},null,8,["modelValue","label"])):(r(),f(x,{key:1,ref_key:"emojiInputDescriptionRef",ref:q,modelValue:e(m).description,"onUpdate:modelValue":s[26]||(s[26]=o=>e(m).description=o),label:e(a)("game.base.step1.description.name")},null,8,["modelValue","label"]))])):N("",!0),B("div",ce,[(r(!0),E(K,null,ne(e(ge),o=>(r(),E("div",{class:"emoji-item",onClick:w=>Q(o)},b(o),9,ye))),256))])]),_:1}),e(k)?N("",!0):(r(),f(ue,{key:0},{default:t(()=>[l(be),l(T,{variant:"text",color:"info",href:"https://www.bilibili.com/opus/814456568458248259",target:"_blank","append-icon":"ri-share-box-line"},{default:t(()=>[g(b(e(a)("game.base.step1.emoji.thanks")),1)]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])],64))}},qe=Y(ke,[["__scopeId","data-v-51faa068"]]);export{qe as default};
