import{_ as k}from"./Result-gWT-ossO.js";import{l as v}from"./logs-BPuWEDqr.js";import{g as S,d as V,e as x,b as T,f,j as B,a8 as G,Q as z,c as p,l as e,o as l,A as i,w as o,a as s,p as A,s as u,v as m,t as c,V as C,F as _}from"./index-D0_VvR3J.js";import"./VContainer-BdgJJao2.js";/* empty css              */import"./axios-B3QxYxjQ.js";const M={__name:"download",setup(H){const r=S(),w=V();x();const{t}=T(),d=f(!1),y=()=>{d.value=!0;const b={roomID:r.room.id};v.download.download(b,"logs.zip").finally(()=>{d.value=!1})},a=()=>Math.max(2,Math.floor(g.value-160)),g=f(window.innerHeight),h=G(()=>{g.value=window.innerHeight},200);return B(async()=>{window.addEventListener("resize",h)}),z(()=>{window.removeEventListener("resize",h)}),(b,L)=>{const n=k;return e(r).gameVersion.local!==0?(l(),p(_,{key:0},[e(r).room.id!==0?(l(),i(C,{key:0,height:a()},{default:o(()=>[s(A,null,{default:o(()=>[s(n,{height:a(),type:"info",title:e(t)("logs.download.title"),"sub-title":e(t)("logs.download.subTitle")},{default:o(()=>[s(u,{loading:e(d),class:"mt-4",onClick:y},{default:o(()=>[m(c(e(t)("logs.download.button")),1)]),_:1},8,["loading"])]),_:1},8,["height","title","sub-title"])]),_:1})]),_:1},8,["height"])):(l(),i(n,{key:1,title:e(t)("global.noRoomSelected.title"),"sub-title":e(t)("global.noRoomSelected.subTitle"),type:"error",height:a()},{default:o(()=>[s(u,{to:"/rooms",class:"mt-4"},{default:o(()=>[m(c(e(t)("global.noRoomSelected.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(l(),p(_,{key:1},[e(w).userInfo.role==="admin"?(l(),i(n,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:a(),type:"error"},{default:o(()=>[s(u,{to:"/install",class:"mt-4"},{default:o(()=>[m(c(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(l(),i(n,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:a(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{M as default};
