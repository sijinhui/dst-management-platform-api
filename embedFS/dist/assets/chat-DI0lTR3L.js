import{_ as L}from"./Result-gWT-ossO.js";import G from"./singleLog-CSIT6pua.js";import{g as R,d as A,e as U,b as $,f as d,j as z,a8 as E,Q as M,c as b,l as e,o as l,A as r,F as _,a,w as o,v as V,t as f,x as w,D as v,V as q,ab as W,k,p as j,s as S}from"./index-D0_VvR3J.js";import Q from"./log-CdWSXfEQ.js";import{l as x}from"./logs-BPuWEDqr.js";import{c as D,d as J,e as I,f as K}from"./VTabs-BDSGrPgI.js";import{V as O}from"./VSelect-DehtkG2o.js";import"./VContainer-BdgJJao2.js";/* empty css              */import"./VSwitch-CIENX7Ym.js";import"./index-BYTG7FXw.js";import"./VInput-CQ0d1937.js";import"./VSelectionControl-KRPi77qu.js";import"./VChip-Bl_XNOgC.js";import"./VRow-T4pZZsdz.js";import"./VSpacer-BWidqFwK.js";import"./VCol-B5VJ-k2B.js";import"./VNumberInput-ChTB30Zu.js";import"./VTextField-BDhl3HoB.js";import"./preview-CwSUJBLr.js";import"./axios-B3QxYxjQ.js";import"./ssrBoot-CVvmSRtT.js";import"./VList-B7_QlUC1.js";import"./VMenu-gAht7neB.js";import"./dialog-transition-Bnn_UDo8.js";import"./VCheckboxBtn-DD1lUkrO.js";const P={class:"card-header"},X={class:"fcc"},Fe={__name:"chat",setup(Y){const c=R(),N=A();U();const{t}=$(),n=d("current"),T=d([]),B=()=>{const y={roomID:c.room.id,worldID:0,logType:"chat"};x.history.list.get(y).then(i=>{T.value=i.data})},g=d(""),h=d(""),m=d(!1),H=()=>{m.value=!0;const y={roomID:c.room.id,worldID:0,logType:"chat",logFile:g.value};x.history.content.get(y).then(i=>{h.value="",h.value=i.data}).finally(()=>{m.value=!1})},s=()=>Math.max(2,Math.floor(F.value-160-37)),F=d(window.innerHeight),C=E(()=>{F.value=window.innerHeight},200);return z(async()=>{c.room.id!==0&&(B(),window.addEventListener("resize",C))}),M(()=>{window.removeEventListener("resize",C)}),(y,i)=>{const u=L;return e(c).gameVersion.local!==0?(l(),b(_,{key:0},[e(c).room.id!==0?(l(),b(_,{key:0},[a(J,{modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=p=>w(n)?n.value=p:null),"align-tabs":"start",color:"primary","show-arrows":""},{default:o(()=>[a(D,{value:"current"},{default:o(()=>[V(f(e(t)("logs.current")),1)]),_:1}),a(D,{value:"history"},{default:o(()=>[V(f(e(t)("logs.history")),1)]),_:1})]),_:1},8,["modelValue"]),a(K,{modelValue:e(n),"onUpdate:modelValue":i[2]||(i[2]=p=>w(n)?n.value=p:null),class:"mt-4"},{default:o(()=>[a(I,{value:"current"},{default:o(()=>[e(n)==="current"?(l(),r(G,{key:0,type:"chat",chat:""})):v("",!0)]),_:1}),a(I,{value:"history"},{default:o(()=>[a(q,{height:s()},{default:o(()=>[a(W,{class:"my-2"},{default:o(()=>[k("div",P,[k("span",null,f(e(t)("logs.history")),1),k("div",X,[a(O,{modelValue:e(g),"onUpdate:modelValue":[i[1]||(i[1]=p=>w(g)?g.value=p:null),H],items:e(T),disabled:e(m),loading:e(m),label:e(t)("logs.logFile"),density:"compact","min-width":"150px"},null,8,["modelValue","items","disabled","loading","label"])])])]),_:1}),a(j,null,{default:o(()=>[e(g)?(l(),b(_,{key:0},[!e(m)&&e(h)?(l(),r(Q,{key:0,content:e(h),height:s()-150},null,8,["content","height"])):v("",!0),e(m)?(l(),r(u,{key:1,type:"info",title:e(t)("logs.fetching"),height:s()-150},null,8,["title","height"])):v("",!0),!e(m)&&!e(h)?(l(),r(u,{key:2,type:"info",height:s()-150,title:e(t)("logs.noContent")},null,8,["height","title"])):v("",!0)],64)):(l(),r(u,{key:1,type:"info",height:s()-150,title:e(t)("logs.noLogFile")},null,8,["height","title"]))]),_:1})]),_:1},8,["height"])]),_:1})]),_:1},8,["modelValue"])],64)):(l(),r(u,{key:1,title:e(t)("global.noRoomSelected.title"),"sub-title":e(t)("global.noRoomSelected.subTitle"),type:"error",height:s()},{default:o(()=>[a(S,{to:"/rooms",class:"mt-4"},{default:o(()=>[V(f(e(t)("global.noRoomSelected.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(l(),b(_,{key:1},[e(N).userInfo.role==="admin"?(l(),r(u,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:s(),type:"error"},{default:o(()=>[a(S,{to:"/install",class:"mt-4"},{default:o(()=>[V(f(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(l(),r(u,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:s(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{Fe as default};
