import{h as N,_ as Ml,o as Bl,u as El,a as Rl,g as Gl,b as Kl,c as He,r as _,k as Qe,d as Wl,e as Ol,w as jl,f as r,i as x,F as M,j as a,l,m as e,n as i,p as u,t as n,q as p,s as ae,v as g,x as K,y as Ye,z as Hl,A as B,B as J,E as Je,C as Xe,D as Ql,G as Yl,H as Jl,I as Ze,J as f,K as el}from"./index-CnGsCQVR.js";import{e as de}from"./index-D7VhyqD7.js";import{s as oe,f as ll,v as Xl,a as Zl}from"./tools-CmP39zM0.js";const T={roomInfo:{url:"/home/room_info",get:async function(b){return await N.get(this.url,b)}},sysInfo:{url:"/home/sys_info",get:async function(b){return await N.get(this.url,b)}},worldInfo:{url:"/home/world_info",get:async function(b){return await N.get(this.url,b)}},exec:{url:"/home/exec",post:async function(b){return await N.post(this.url,b)}},allScreens:{url:"/home/cluster/all_screens",get:async function(b){return await N.get(this.url,b)}},screenKill:{url:"/home/cluster/screen_kill",post:async function(b){return await N.post(this.url,b)}},interface:{announce:{url:"/home/announce",post:async function(b){return await N.post(this.url,b)}},console:{url:"/home/console",post:async function(b){return await N.post(this.url,b)}}},isUpdating:{url:"/home/update/is_updating",get:async function(b){return await N.get(this.url,b)}},connectCode:{url:"/home/connect_code",get:async function(b){return await N.get(this.url,b)},put:async function(b){return await N.put(this.url,b)}}},et={class:"page-div"},lt={class:"card-header"},tt={class:"fcc"},at={key:1,class:"fcc",style:{height:"150px"}},ot={class:"card-header"},nt={class:"fcc"},st={class:"fcc"},ut={class:"percentage-value"},rt={class:"percentage-value"},it={class:"percentage-label"},dt={class:"card-header"},ct={key:0},mt={class:"fcc"},pt={style:{"margin-right":"10px"}},ft={key:1,class:"fcc",style:{height:"150px"}},vt={class:"card-header"},ht={key:0},_t={style:{display:"flex","align-items":"center"}},yt={style:{display:"flex","align-items":"center"}},gt={class:"fcc"},bt={style:{"margin-right":"10px"}},Ct={key:1,class:"fcc",style:{height:"150px"}},kt={class:"card-header"},wt={style:{display:"flex","align-items":"center"}},xt={key:1,class:"fcc",style:{height:"300px"}},zt={class:"fcc",style:{height:"67vh"}},Dt={class:"fcc",style:{height:"67vh"}},It={class:"tip_warning"},Vt={class:"tip"},Tt={style:{margin:"20px"}},St={class:"tip"},Ut={class:"tip_success"},Nt={style:{display:"flex","justify-content":"flex-end","padding-top":"30px"}},Pt={style:{margin:"20px 0"}},$t={class:"tip",style:{width:"100%"}},qt={style:{display:"flex","align-items":"center"}},Ft={style:{display:"flex","align-items":"center"}},At={style:{display:"flex","align-items":"center"}},Lt={style:{display:"flex","align-items":"center"}},Mt={style:{display:"flex","align-items":"center"}},Bt={style:{display:"flex","align-items":"center"}},Et={__name:"index",setup(b){Bl(()=>{cl(),il(),dl(),he(!1),_e(),pl(),ol()});const{t:o}=El(),{isMobile:U}=Rl(),m=Gl(),tl=Kl(),ce=He(()=>m.isDark),c=He(()=>m.language),al=tl.userInfo,ol=async()=>{var d;await oe(2e3),m.needTour=(((d=m.dstClusters)==null?void 0:d.length)||0)===0};_(!1);const me=_(!1),pe=_(!1),L=_({server:0,local:0}),W=_(""),D=_({ip:"",port:void 0}),fe=_(!1),nl=()=>{sl(),fe.value=!0},sl=()=>{T.connectCode.get({clusterName:m.selectedDstCluster}).then(d=>{D.value=d.data,D.value.port||(D.value.port=void 0)})},ul=()=>{if(!D.value.ip){B(c.value==="zh"?"请输入IP":"Please input IP");return}if(!D.value.port){B(c.value==="zh"?"请输入端口":"Please input PORT");return}if(!Xl(D.value.ip)){B(c.value==="zh"?"请输入正确的IP或域名":"Please input correct IP or domain");return}if(!Zl(D.value.port)){B(c.value==="zh"?"请输入正确的端口":"Please input correct PORT");return}const d={clusterName:m.selectedDstCluster,customConnectCode:D.value};T.connectCode.put(d).then(s=>{J(s.message)}),Ve()},rl=()=>{D.value={ip:"",port:0};const d={clusterName:m.selectedDstCluster,customConnectCode:D.value};T.connectCode.put(d).then(s=>{J(c.value==="zh"?"清除成功":"Clear Success")}),Ve()},il=()=>{me.value=!0,de.dstVersion.get().then(d=>{L.value=d.data,L.value.local===0&&(c.value==="zh"?Qe("游戏版本异常，请确认游戏是否安装成功。安装成功后，才能正常使用此平台","饥荒管理平台提示",0):Qe("Game version is abnormal. Please confirm whether the game has been installed successfully. This DMP can only function properly after the game is successfully installed.","DMP TIPS",0))}).finally(()=>{me.value=!1})},dl=async()=>{m.customConnectionCode[m.selectedDstCluster]?m.customConnectionCode[m.selectedDstCluster].password?W.value=`c_connect('${m.customConnectionCode[m.selectedDstCluster].ip}', ${m.customConnectionCode[m.selectedDstCluster].port}, '${m.customConnectionCode[m.selectedDstCluster].password}')`:W.value=`c_connect('${m.customConnectionCode[m.selectedDstCluster].ip}', ${m.customConnectionCode[m.selectedDstCluster].port})`:(pe.value=!0,m.selectedDstCluster||await oe(1e3),de.connectionCode.get({clusterName:m.selectedDstCluster}).then(d=>{W.value=d.data}).finally(()=>{pe.value=!1}))},v=_({clusterSetting:{},seasonInfo:{season:{},cycles:0,elapsedDays:0,seasonLength:{summer:15,autumn:20,spring:20,winter:15},phase:{}},modsCount:0,players:[]}),cl=async()=>{m.selectedDstCluster||await oe(1e3),T.roomInfo.get({clusterName:m.selectedDstCluster}).then(d=>{v.value=d.data})},Pe=d=>v.value.seasonInfo.cycles>-1?`(${v.value.seasonInfo.elapsedDays}/${v.value.seasonInfo.seasonLength[d]})`:"",ve=_({cpu:0,memory:0}),X=_([{id:"",stat:!1,world:"",type:"",cpu:0,mem:0,memSize:0,diskUsed:0}]),ml=()=>{T.sysInfo.get().then(d=>{ve.value=d.data})},he=async(d=!0)=>{if(v.value.clusterSetting.name==="")return;d||m.selectedDstCluster||await oe(1e3);const s={clusterName:m.selectedDstCluster};T.worldInfo.get(s).then(S=>{X.value=S.data})},$e=[{color:"#5cb87a",percentage:20},{color:"#1989fa",percentage:40},{color:"#e6a23c",percentage:60},{color:"#f56c6c",percentage:80},{color:"#6f7ad3",percentage:100}],qe=_(!1),_e=()=>{T.isUpdating.get().then(d=>{qe.value=d.data})};let ne=null,ye=null;const pl=()=>{ne=setInterval(()=>{ml()},2e3),ye=setInterval(()=>{m.selectedDstCluster&&(he(),_e())},1e4)},Fe=()=>{ne&&(clearInterval(ne),clearInterval(ye),ne=null,ye=null)},ge=_(!1),fl=d=>{const s={clusterName:m.selectedDstCluster,worldName:d,type:"switch",extraData:""};ge.value=!0,T.exec.post(s).finally(async()=>{await he(),await oe(1500),ge.value=!1})},k=(d,s,S=null)=>{const C={startup:{en:"STARTUP",zh:"启动"},rollback:{en:"ROLLBACK",zh:"回档"},shutdown:{en:"SHUTDOWN",zh:"关闭"},restart:{en:"RESTART",zh:"重启"},update:{en:"UPDATE GAME",zh:"更新游戏"},reset:{en:"RESET GAME",zh:"重置游戏"},delete:{en:"DELETE GAME",zh:"删除世界"}};Je.confirm(c.value==="zh"?`将执行 ${C[d].zh} 操作，是否继续？`:`The ${C[d].en} operation will be performed. Do you want to continue?`,c.value==="zh"?"请确认您的操作":"Please confirm your operation",{confirmButtonText:c.value==="zh"?"确定":"confirm",cancelButtonText:c.value==="zh"?"取消":"cancel",type:"warning",beforeClose:(w,H,h)=>{if(w==="confirm"){H.confirmButtonLoading=!0;const q={type:d,extraData:s,clusterName:m.selectedDstCluster,worldName:S};T.exec.post(q).then(y=>{J(y.message),_e(),h()}).catch(()=>{}).finally(()=>{H.confirmButtonLoading=!1})}else h()}}).then(()=>{}).catch(()=>{Xe(o("home.canceled"))})},be=_(!1),Z=_({message:""}),Ae=()=>{if(Z.value.message===""){B(c.value==="zh"?"请输入要宣告的内容":"Please enter the content to be announced");return}be.value=!0;const d={type:"announce",extraData:Z.value.message,clusterName:m.selectedDstCluster,worldName:""};T.exec.post(d).then(s=>{J(s.message),Z.value.message=""}).finally(()=>{be.value=!1})},Ce=_(!1),P=_({cmd:"",world:""}),Le=()=>{if(P.value.world===""){B(c.value==="zh"?"请选择地面或洞穴":"Please select a world from ground and cave");return}if(P.value.cmd===""){B(c.value==="zh"?"请输入要执行的命令":"Please enter the command to execute");return}Ce.value=!0;const d={type:"console",extraData:P.value.cmd,clusterName:m.selectedDstCluster,worldName:P.value.world};T.exec.post(d).then(s=>{J(s.message),P.value.cmd=""}).finally(()=>{Ce.value=!1})},ke=_(!1),we=_(!1),Me=_([]),vl=()=>{ke.value=!0,we.value=!0;const d={clusterName:m.selectedDstCluster};de.modInfo.get(d).then(s=>{Me.value=s.data}).finally(()=>{we.value=!1})},xe=_(!1),Be=_([]),ze=_(!1),Ee=()=>{ze.value=!0,xe.value=!0;const d={clusterName:m.selectedDstCluster};T.allScreens.get(d).then(s=>{Be.value=s.data}).finally(()=>{xe.value=!1}),Re()},hl=d=>{Je.confirm(c.value==="zh"?"将执行 关闭进程 操作，是否继续？":"The shutdown operation will be performed. Do you want to continue?",c.value==="zh"?"请确认您的操作":"Please confirm your operation",{confirmButtonText:c.value==="zh"?"确定":"confirm",cancelButtonText:c.value==="zh"?"取消":"cancel",type:"warning",beforeClose:(s,S,C)=>{if(s==="confirm"){S.confirmButtonLoading=!0;const w={screenName:d};T.screenKill.post(w).then(H=>{J(H.message),Ee(),C()}).catch(()=>{}).finally(()=>{S.confirmButtonLoading=!1})}else C()}}).then(()=>{}).catch(()=>{Xe(o("home.canceled"))})},_l=[{label:"ap-southeast-1",value:"ap-southeast-1"},{label:"ap-east-1",value:"ap-east-1"},{label:"us-east-1",value:"us-east-1"},{label:"eu-central-1",value:"eu-central-1"}],De=_(["ap-southeast-1","ap-east-1"]),Ie=_(!1),O=_(!1),Re=()=>{O.value=!0;const d={clusterName:m.selectedDstCluster,regions:De.value};de.checkLobby.post(d).then(s=>{Ie.value=s.data}).finally(()=>{O.value=!1})},ee=_(!1),j=_("player"),V=_(""),$=_(),E=_(),I=_(""),yl=[{label:{zh:"开启上帝模式",en:"god mode"},value:0},{label:{zh:"开启建造模式",en:"builder mode"},value:1},{label:{zh:"开启隐身模式",en:"invisible mode"},value:2},{label:{zh:"开启一击必杀",en:"one attack to kill"},value:3},{label:{zh:"解锁所有科技",en:"unlock all tech"},value:4},{label:{zh:"移速×4(按需更改)",en:"moving speed × 4 (modify it by self)"},value:5},{label:{zh:"重选角色",en:"reselect character"},value:6}],gl=()=>{if(!/^KU_/.test(V.value)){B(c.value==="zh"?"请输入正确的玩家UID":"Please input the correct player UID");return}$.value===0&&(I.value=`UserToPlayer('${V.value}').components.health:SetInvincible(true)`),$.value===1&&(I.value=`for k, v in pairs(AllPlayers) do if v.userid=='${V.value}' then AllPlayers[k].components.builder:GiveAllRecipes() end end`),$.value===2&&(I.value=`UserToPlayer('${V.value}'):AddTag('debugnoattack')`),$.value===3&&(I.value=`UserToPlayer('${V.value}').components.combat.CalcDamage = function() return 9999999999 * 9 end`),$.value===4&&(I.value=`UserToPlayer('${V.value}').components.builder:UnlockRecipesForTech({SCIENCE = 1, MAGIC = 1, ANCIENT = 1, SHADOW = 1, CARTOGRAPHY = 1})`),$.value===5&&(I.value=`UserToPlayer('${V.value}').components.locomotor:SetExternalSpeedMultiplier(UserToPlayer('${V.value}'), 'c_speedmult', 4)`),$.value===6&&(I.value=`c_despawn(UserToPlayer('${V.value}'))`)},bl=[{label:{zh:"回档6天(按需更改)",en:"roll back 6 days (modify it by self)"},value:0},{label:{zh:"跳过1天(按需更改)",en:"skip 1 day (modify it by self)"},value:1},{label:{zh:"下一阶段",en:"next phase"},value:2},{label:{zh:"保存游戏",en:"save"},value:3}],Cl=()=>{E.value===0&&(I.value="c_rollback(6)"),E.value===1&&(I.value="c_skip(1)"),E.value===2&&(I.value="TheWorld:PushEvent('ms_nextphase')"),E.value===3&&(I.value="c_save()")},kl=()=>{P.value.cmd=I.value,ee.value=!1},se=Ql();Yl();const Ge=Wl(),Ke=Jl("refresh"),Ve=()=>{setTimeout(()=>{se.meta.isKeepAlive&&Ge.removeKeepAliveName(se.name),Ke(!1),Ze(()=>{se.meta.isKeepAlive&&Ge.addKeepAliveName(se.name),Ke(!0)})},0)};return Ol(()=>{Fe(),window.removeEventListener("beforeunload",Fe)}),jl(()=>m.selectedDstCluster,d=>{d&&Ze(()=>{Ve()})},{immediate:!1}),(d,s)=>{const S=f("QuestionFilled"),C=f("el-icon"),w=f("el-tooltip"),H=f("DocumentCopy"),h=f("el-button"),q=f("el-descriptions-item"),y=f("el-tag"),wl=f("el-descriptions"),Q=f("el-result"),R=f("el-card"),F=f("el-col"),We=f("el-progress"),A=f("el-row"),le=f("el-form-item"),Te=f("el-form"),xl=f("el-dropdown-item"),zl=f("el-dropdown-menu"),Dl=f("el-dropdown"),te=f("el-input"),ue=f("el-option"),re=f("el-select"),z=f("el-table-column"),Il=f("el-switch"),Se=f("el-table"),Vl=f("el-image"),ie=f("el-dialog"),Tl=f("Loading"),Ue=f("el-alert"),Oe=f("el-radio"),Sl=f("el-radio-group"),Ul=f("el-text"),Nl=f("MilkTea"),Y=f("el-tour-step"),Pl=f("Sugar"),$l=f("ColdDrink"),ql=f("Dessert"),Fl=f("Fries"),Al=f("IceDrink"),Ll=f("el-tour"),je=el("copy"),Ne=el("loading");return r(),x("div",et,[L.value.local!==-1?(r(),x(M,{key:0},[a(m).dstClusters?(r(),x(M,{key:0},[l(A,{gutter:10},{default:e(()=>[l(F,{lg:12,md:12,sm:24,span:12,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[l(R,{shadow:"never",style:{"min-height":"250px"}},{header:e(()=>[i("div",lt,[i("div",tt,[u(n(a(o)("home.roomInfo"))+" ",1),l(w,{content:a(o)("home.roomInfoTip"),effect:"light",placement:"top"},{default:e(()=>[l(C,{size:"14",style:{"margin-left":"2px"}},{default:e(()=>[l(S)]),_:1})]),_:1},8,["content"])])])]),default:e(()=>[v.value.clusterSetting.name!==""?(r(),p(wl,{key:0,column:a(U)?1:2},{default:e(()=>[l(q,{label:a(o)("home.roomName")},{default:e(()=>[ae((r(),p(h,{link:"",type:"primary"},{default:e(()=>[u(n(v.value.clusterSetting.name)+" ",1),l(C,{style:{"margin-left":"3px"}},{default:e(()=>[l(H)]),_:1})]),_:1})),[[je,v.value.clusterSetting.name]])]),_:1},8,["label"]),l(q,{label:a(o)("home.connectionCode")},{default:e(()=>[l(w,{content:W.value,effect:"light",placement:"top"},{default:e(()=>[ae((r(),p(h,{disabled:W.value==="",loading:pe.value,link:"",type:"primary"},{default:e(()=>[u(n(a(o)("home.copy")),1)]),_:1},8,["disabled","loading"])),[[je,W.value]])]),_:1},8,["content"]),l(h,{link:"",type:"info",onClick:nl},{default:e(()=>[u(n(a(o)("home.customConnectionCode")),1)]),_:1})]),_:1},8,["label"]),l(q,{label:a(o)("home.cycles")},{default:e(()=>[v.value.seasonInfo.cycles>-1?(r(),p(y,{key:0,type:"success"},{default:e(()=>[u(n(v.value.seasonInfo.cycles),1)]),_:1})):(r(),p(y,{key:1,type:"danger"},{default:e(()=>[u(n(c.value==="zh"?"获取失败":"Failed to retrieve"),1)]),_:1}))]),_:1},8,["label"]),l(q,{label:a(o)("home.phase")},{default:e(()=>[c.value==="en"?(r(),p(y,{key:0,type:v.value.seasonInfo.phase.en==="Failed to retrieve"?"danger":"success"},{default:e(()=>[u(n(v.value.seasonInfo.phase.en),1)]),_:1},8,["type"])):g("",!0),c.value==="zh"?(r(),p(y,{key:1,type:v.value.seasonInfo.phase.zh==="获取失败"?"danger":"success"},{default:e(()=>[u(n(v.value.seasonInfo.phase.zh),1)]),_:1},8,["type"])):g("",!0)]),_:1},8,["label"]),l(q,{label:a(o)("home.season")},{default:e(()=>[c.value==="en"?(r(),p(y,{key:0,type:v.value.seasonInfo.cycles>-1?"success":"danger"},{default:e(()=>[u(n(v.value.seasonInfo.season.en)+" "+n(Pe(v.value.seasonInfo.season.en)),1)]),_:1},8,["type"])):g("",!0),c.value==="zh"?(r(),p(y,{key:1,type:v.value.seasonInfo.cycles>-1?"success":"danger"},{default:e(()=>[u(n(v.value.seasonInfo.season.zh)+" "+n(Pe(v.value.seasonInfo.season.en)),1)]),_:1},8,["type"])):g("",!0)]),_:1},8,["label"]),l(q,{label:a(o)("home.mods")},{default:e(()=>[l(y,null,{default:e(()=>[u(n(v.value.modsCount),1)]),_:1}),l(h,{link:"",style:{"margin-left":"10px"},type:"primary",disabled:v.value.modsCount===0,onClick:vl},{default:e(()=>[u(n(a(o)("home.modsButton")),1)]),_:1},8,["disabled"])]),_:1},8,["label"]),l(q,{label:a(o)("home.version")},{default:e(()=>[ae((r(),p(y,{type:L.value.local===L.value.server&&!L.value.server<1?"success":"danger"},{default:e(()=>[u(" ("+n(L.value.local)+"/"+n(L.value.server)+") ",1)]),_:1},8,["type"])),[[Ne,me.value]])]),_:1},8,["label"]),l(q,{label:a(o)("home.playerNum")},{default:e(()=>[v.value.players!==null?(r(),p(w,{key:0,content:v.value.players.map(t=>t.nickName).join(", "),effect:"light",placement:"top"},{default:e(()=>[l(y,{type:"primary"},{default:e(()=>[u("("+n(v.value.players.length)+"/"+n(v.value.clusterSetting.playerNum)+")",1)]),_:1})]),_:1},8,["content"])):(r(),p(y,{key:1,type:"primary"},{default:e(()=>[u("(0/"+n(v.value.clusterSetting.playerNum)+")",1)]),_:1}))]),_:1},8,["label"])]),_:1},8,["column"])):g("",!0),v.value.clusterSetting.name===""?(r(),x("div",at,[l(Q,{title:a(o)("home.noServer"),icon:"warning"},null,8,["title"])])):g("",!0)]),_:1})]),_:1}),l(F,{lg:12,md:12,sm:24,span:12,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[l(R,{shadow:"never",style:{"min-height":"250px"}},{header:e(()=>[i("div",ot,[i("div",nt,[u(n(a(o)("home.sysInfo"))+" ",1),l(w,{content:a(o)("home.sysInfoTip"),effect:"light",placement:"top"},{default:e(()=>[l(C,{size:"14",style:{"margin-left":"2px"}},{default:e(()=>[l(S)]),_:1})]),_:1},8,["content"])])])]),default:e(()=>[i("div",st,[l(We,{color:$e,percentage:ve.value.cpu,type:"dashboard"},{default:e(({percentage:t})=>[i("span",ut,n(t.toFixed(1)),1),s[32]||(s[32]=i("span",{class:"percentage-label"},"CPU",-1))]),_:1},8,["percentage"]),l(We,{color:$e,percentage:ve.value.memory,style:{"margin-left":"10%"},type:"dashboard"},{default:e(({percentage:t})=>[i("span",rt,n(t.toFixed(1)),1),i("span",it,n(a(o)("home.mem")),1)]),_:1},8,["percentage"])])]),_:1})]),_:1})]),_:1}),l(A,{gutter:10},{default:e(()=>[l(F,{lg:12,md:12,sm:24,span:12,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[l(R,{style:{"min-height":"300px"},shadow:"never"},{header:e(()=>[i("div",dt,n(a(o)("home.control")),1)]),default:e(()=>[v.value.clusterSetting.name!==""?(r(),x("div",ct,[l(Te,{size:"large"},{default:e(()=>[l(le,{label:a(o)("home.rollback")},{default:e(()=>[a(U)?(r(),p(F,{key:0},{default:e(()=>[l(h,{size:"small",onClick:s[0]||(s[0]=t=>k("rollback",1))},{default:e(()=>[u("1"+n(a(o)("home.day")),1)]),_:1}),l(h,{size:"small",onClick:s[1]||(s[1]=t=>k("rollback",2))},{default:e(()=>[u(" 2"+n(a(o)("home.days")),1)]),_:1}),l(h,{size:"small",onClick:s[2]||(s[2]=t=>k("rollback",3))},{default:e(()=>[u(" 3"+n(a(o)("home.days")),1)]),_:1})]),_:1})):g("",!0),a(U)?(r(),p(F,{key:1},{default:e(()=>[l(h,{size:"small",onClick:s[3]||(s[3]=t=>k("rollback",4))},{default:e(()=>[u(" 4"+n(a(o)("home.days")),1)]),_:1}),l(h,{size:"small",onClick:s[4]||(s[4]=t=>k("rollback",5))},{default:e(()=>[u(" 5"+n(a(o)("home.days")),1)]),_:1})]),_:1})):g("",!0),a(U)?g("",!0):(r(),p(F,{key:2},{default:e(()=>[l(h,{size:"small",onClick:s[5]||(s[5]=t=>k("rollback",1))},{default:e(()=>[u("1"+n(a(o)("home.day")),1)]),_:1}),l(h,{size:"small",onClick:s[6]||(s[6]=t=>k("rollback",2))},{default:e(()=>[u(" 2"+n(a(o)("home.days")),1)]),_:1}),l(h,{size:"small",onClick:s[7]||(s[7]=t=>k("rollback",3))},{default:e(()=>[u(" 3"+n(a(o)("home.days")),1)]),_:1}),l(h,{size:"small",onClick:s[8]||(s[8]=t=>k("rollback",4))},{default:e(()=>[u(" 4"+n(a(o)("home.days")),1)]),_:1}),l(h,{size:"small",onClick:s[9]||(s[9]=t=>k("rollback",5))},{default:e(()=>[u(" 5"+n(a(o)("home.days")),1)]),_:1})]),_:1}))]),_:1},8,["label"])]),_:1}),l(Te,{size:"large"},{default:e(()=>[l(le,null,{default:e(()=>[l(h,{size:a(U)?"small":"default",type:"success",onClick:s[10]||(s[10]=t=>k("startup",0))},{default:e(()=>[u(n(a(o)("home.startup")),1)]),_:1},8,["size"]),l(h,{size:a(U)?"small":"default",type:"primary",onClick:s[11]||(s[11]=t=>k("restart",0))},{default:e(()=>[u(n(a(o)("home.restart")),1)]),_:1},8,["size"]),l(w,{content:a(o)("home.updateTips"),effect:"light",placement:"top"},{default:e(()=>[l(h,{disabled:a(al).role!=="admin",loading:qe.value,size:a(U)?"small":"default",type:"warning",onClick:s[12]||(s[12]=t=>k("update",0))},{default:e(()=>[u(n(a(o)("home.update")),1)]),_:1},8,["disabled","loading","size"])]),_:1},8,["content"])]),_:1}),l(le,null,{default:e(()=>[l(w,{content:a(o)("home.shutdownTips"),effect:"light",placement:"top"},{default:e(()=>[l(h,{size:a(U)?"small":"default",type:"info",onClick:s[13]||(s[13]=t=>k("shutdown",0))},{default:e(()=>[u(n(a(o)("home.shutdown")),1)]),_:1},8,["size"])]),_:1},8,["content"]),l(w,{content:a(o)("home.resetTips"),effect:"light",placement:"top"},{default:e(()=>[l(h,{size:a(U)?"small":"default",type:"danger",onClick:s[14]||(s[14]=t=>k("reset",0))},{default:e(()=>[u(n(a(o)("home.reset")),1)]),_:1},8,["size"])]),_:1},8,["content"]),l(w,{content:a(o)("home.deleteTips"),effect:"light",placement:"top"},{default:e(()=>[l(Dl,{trigger:"click",style:{"margin-left":"12px"}},{dropdown:e(()=>[l(zl,null,{default:e(()=>[(r(!0),x(M,null,K(X.value,t=>(r(),p(xl,{onClick:G=>k("delete",0,t.world)},{default:e(()=>[i("div",mt,[i("span",pt,n(t.world),1),t.type==="forest"?(r(),p(y,{key:0,type:"success"},{default:e(()=>[u(n(c.value==="zh"?"地面":"Ground"),1)]),_:1})):g("",!0),t.type==="cave"?(r(),p(y,{key:1,type:"warning"},{default:e(()=>[u(n(c.value==="zh"?"洞穴":"Cave"),1)]),_:1})):g("",!0),t.type==="None"?(r(),p(y,{key:2,type:"danger"},{default:e(()=>[u(n(c.value==="zh"?"未识别":"Undefined"),1)]),_:1})):g("",!0)])]),_:2},1032,["onClick"]))),256))]),_:1})]),default:e(()=>[l(h,{color:"#626aef",size:a(U)?"small":"default"},{default:e(()=>[u(n(a(o)("home.delete")),1)]),_:1},8,["size"])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1})])):g("",!0),v.value.clusterSetting.name===""?(r(),x("div",ft,[l(Q,{title:a(o)("home.noServer"),icon:"warning"},null,8,["title"])])):g("",!0)]),_:1})]),_:1}),l(F,{lg:12,md:12,sm:24,span:12,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[l(R,{style:{"min-height":"300px"},shadow:"never"},{header:e(()=>[i("div",vt,[u(n(a(o)("home.interface"))+" ",1),l(h,{link:"",type:"primary",onClick:s[15]||(s[15]=t=>ee.value=!0)},{default:e(()=>[u(n(a(o)("home.quickCmd.openButton")),1)]),_:1})])]),default:e(()=>[v.value.clusterSetting.name!==""?(r(),x("div",ht,[l(Te,{"label-position":"top"},{default:e(()=>[l(le,null,{label:e(()=>[i("div",_t,[i("span",null,n(a(o)("home.announcement")),1),l(w,{content:a(o)("home.announceTip"),effect:"light",placement:"top"},{default:e(()=>[l(C,{size:"14",style:{"margin-left":"2px"}},{default:e(()=>[l(S)]),_:1})]),_:1},8,["content"])])]),default:e(()=>[l(te,{modelValue:Z.value.message,"onUpdate:modelValue":s[16]||(s[16]=t=>Z.value.message=t),onKeyup:Ye(Ae,["enter"])},{append:e(()=>[l(h,{loading:be.value,onClick:Ae},{default:e(()=>[u(n(a(o)("home.send")),1)]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1}),l(le,null,{label:e(()=>[i("div",yt,[s[33]||(s[33]=i("span",null,"Console",-1)),l(w,{content:a(o)("home.consoleTip"),effect:"light",placement:"top"},{default:e(()=>[l(C,{size:"14",style:{"margin-left":"2px"}},{default:e(()=>[l(S)]),_:1})]),_:1},8,["content"])])]),default:e(()=>[l(te,{modelValue:P.value.cmd,"onUpdate:modelValue":s[18]||(s[18]=t=>P.value.cmd=t),onKeyup:Ye(Le,["enter"])},{prepend:e(()=>[l(re,{modelValue:P.value.world,"onUpdate:modelValue":s[17]||(s[17]=t=>P.value.world=t),style:{width:"115px"}},{default:e(()=>[(r(!0),x(M,null,K(X.value,t=>(r(),p(ue,{disabled:!t.stat,label:t.world,value:t.world},{default:e(()=>[i("div",gt,[i("span",bt,n(t.world),1),t.type==="forest"?(r(),p(y,{key:0,type:"success"},{default:e(()=>[u(n(c.value==="zh"?"地面":"Ground"),1)]),_:1})):g("",!0),t.type==="cave"?(r(),p(y,{key:1,type:"warning"},{default:e(()=>[u(n(c.value==="zh"?"洞穴":"Cave"),1)]),_:1})):g("",!0),t.type==="None"?(r(),p(y,{key:2,type:"danger"},{default:e(()=>[u(n(c.value==="zh"?"未识别":"Undefined"),1)]),_:1})):g("",!0)])]),_:2},1032,["disabled","label","value"]))),256))]),_:1},8,["modelValue"])]),append:e(()=>[l(h,{loading:Ce.value,onClick:Le},{default:e(()=>[u(n(a(o)("home.execute")),1)]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])):g("",!0),v.value.clusterSetting.name===""?(r(),x("div",Ct,[l(Q,{title:a(o)("home.noServer"),icon:"warning"},null,8,["title"])])):g("",!0)]),_:1})]),_:1})]),_:1}),l(A,{gutter:10},{default:e(()=>[l(F,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[l(R,{style:Hl(a(U)?"min-height: 300px":"height: 400px"),shadow:"never"},{header:e(()=>[i("div",kt,[i("span",null,n(c.value==="zh"?"世界信息":"World Info"),1),l(h,{link:"",type:"primary",onClick:Ee},{default:e(()=>[u(n(c.value==="zh"?"检查世界":"Check World"),1)]),_:1})])]),default:e(()=>[X.value?(r(),p(Se,{key:0,data:X.value,border:""},{default:e(()=>[l(z,{label:"ID",prop:"id"},{default:e(t=>[l(y,{type:"info"},{default:e(()=>[u(n(t.row.id),1)]),_:2},1024)]),_:1}),l(z,{label:a(o)("home.worldName"),prop:"world"},{default:e(t=>[l(y,{type:"primary"},{default:e(()=>[u(n(t.row.world),1)]),_:2},1024)]),_:1},8,["label"]),l(z,{label:a(o)("home.type"),prop:"type"},{default:e(t=>[t.row.type==="forest"?(r(),p(y,{key:0,type:"success"},{default:e(()=>[u(n(c.value==="zh"?"地面":"Ground"),1)]),_:1})):g("",!0),t.row.type==="cave"?(r(),p(y,{key:1,type:"warning"},{default:e(()=>[u(n(c.value==="zh"?"洞穴":"Cave"),1)]),_:1})):g("",!0),t.row.type==="None"?(r(),p(y,{key:2,type:"danger"},{default:e(()=>[u(n(c.value==="zh"?"未识别":"Undefined"),1)]),_:1})):g("",!0)]),_:1},8,["label"]),l(z,{label:a(o)("home.isMaster"),prop:"isMaster"},{default:e(t=>[t.row.isMaster?(r(),p(y,{key:0,type:"primary"},{default:e(()=>[u(n(c.value==="zh"?"是":"Yes"),1)]),_:1})):(r(),p(y,{key:1,type:"info"},{default:e(()=>[u(n(c.value==="zh"?"否":"No"),1)]),_:1}))]),_:1},8,["label"]),l(z,{prop:"cpu"},{header:e(()=>[i("div",wt,[s[34]||(s[34]=i("span",null,"CPU",-1)),l(w,{content:a(o)("home.cpuTip"),effect:"light",placement:"top"},{default:e(()=>[l(C,{size:"14",style:{"margin-left":"2px"}},{default:e(()=>[l(S)]),_:1})]),_:1},8,["content"])])]),default:e(t=>[l(y,{type:"info"},{default:e(()=>[u(n(t.row.cpu.toFixed(2))+"%",1)]),_:2},1024)]),_:1}),l(z,{label:a(o)("home.memory")+"(MiB)",prop:"mem"},{default:e(t=>[l(y,{type:"info"},{default:e(()=>[u(n(t.row.memSize.toFixed(0))+" ["+n(t.row.mem.toFixed(0))+"%]",1)]),_:2},1024)]),_:1},8,["label"]),l(z,{label:a(o)("home.disk"),prop:"diskUsed"},{default:e(t=>[l(y,{type:"info"},{default:e(()=>[u(n(a(ll)(t.row.diskUsed,0)),1)]),_:2},1024)]),_:1},8,["label"]),l(z,{label:a(o)("home.status"),prop:"stat"},{default:e(t=>[l(Il,{modelValue:t.row.stat,"onUpdate:modelValue":G=>t.row.stat=G,"inline-prompt":"","active-text":a(o)("home.running"),"inactive-text":a(o)("home.terminated"),loading:ge.value,onChange:G=>fl(t.row.world)},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text","loading","onChange"])]),_:1},8,["label"])]),_:1},8,["data"])):(r(),x("div",xt,[l(Q,{title:a(o)("home.noServer"),icon:"warning"},null,8,["title"])]))]),_:1},8,["style"])]),_:1})]),_:1})],64)):(r(),p(R,{key:1,shadow:"never"},{default:e(()=>[i("div",zt,[l(Q,{title:"请创建集群后再使用本平台功能",icon:"warning"})])]),_:1}))],64)):g("",!0),L.value.local===-1?(r(),p(R,{key:1,shadow:"never"},{default:e(()=>[i("div",Dt,[l(Q,{title:"请先安装游戏后再使用本平台功能","sub-title":"请前往 工具-安装游戏 页面，或使用脚本进行手动安装",icon:"warning"})])]),_:1})):g("",!0),l(ie,{modelValue:ke.value,"onUpdate:modelValue":s[19]||(s[19]=t=>ke.value=t),"close-on-click-modal":!1,title:a(o)("home.modsTable.title"),width:"80%"},{default:e(()=>[ae((r(),p(Se,{data:Me.value.filter(t=>t.id!==1),border:"",height:"70vh",size:"small",style:{width:"100%"},"tooltip-effect":"light"},{default:e(()=>[l(z,{label:a(o)("home.modsTable.name"),prop:"name"},null,8,["label"]),l(z,{label:a(o)("home.modsTable.pics"),prop:"preview_url",width:"120px"},{default:e(t=>[l(Vl,{src:t.row.preview_url,fit:"fill",style:{width:"100px",height:"100px"}},null,8,["src"])]),_:1},8,["label"]),l(z,{label:a(o)("home.modsTable.size"),prop:"size"},{default:e(t=>[u(n(a(ll)(t.row.size)),1)]),_:1},8,["label"]),l(z,{label:a(o)("home.modsTable.id"),prop:"id"},null,8,["label"]),l(z,{label:a(o)("home.modsTable.tags"),prop:"tags"},{default:e(t=>[(r(!0),x(M,null,K(t.row.tags,G=>(r(),p(y,{style:{margin:"0 5px 5px 0"}},{default:e(()=>[u(n(G.display_name),1)]),_:2},1024))),256))]),_:1},8,["label"])]),_:1},8,["data"])),[[Ne,we.value]])]),_:1},8,["modelValue","title"]),l(ie,{modelValue:ze.value,"onUpdate:modelValue":s[21]||(s[21]=t=>ze.value=t),width:"60%"},{header:e(()=>[u(n(a(o)("home.screenDialog.title")),1)]),default:e(()=>[l(re,{modelValue:De.value,"onUpdate:modelValue":s[20]||(s[20]=t=>De.value=t),multiple:"",disabled:O.value,onChange:Re,style:{margin:"20px 0"}},{default:e(()=>[(r(),x(M,null,K(_l,t=>l(ue,{label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"]),O.value?(r(),p(Ue,{key:0,closable:!1,type:"info","show-icon":"",effect:ce.value?"light":"dark"},{icon:e(()=>[l(C,{class:"is-loading"},{default:e(()=>[l(Tl)]),_:1})]),default:e(()=>[u(" "+n(a(o)("home.screenDialog.tip3")),1)]),_:1},8,["effect"])):g("",!0),Ie.value&&!O.value?(r(),p(Ue,{key:1,closable:!1,type:"success","show-icon":"",effect:ce.value?"light":"dark"},{default:e(()=>[u(n(a(o)("home.screenDialog.tip4")),1)]),_:1},8,["effect"])):g("",!0),!Ie.value&&!O.value?(r(),p(Ue,{key:2,closable:!1,type:"error","show-icon":"",effect:ce.value?"light":"dark"},{default:e(()=>[u(n(a(o)("home.screenDialog.tip5")),1)]),_:1},8,["effect"])):g("",!0),i("div",It,n(a(o)("home.screenDialog.tip1")),1),i("div",Vt,n(a(o)("home.screenDialog.tip2")),1),ae((r(),p(Se,{data:Be.value,border:""},{default:e(()=>[l(z,{label:a(o)("home.screenDialog.column1"),prop:"screenName"},{default:e(t=>[l(y,{type:"primary"},{default:e(()=>[u(n(t.row.screenName),1)]),_:2},1024)]),_:1},8,["label"]),l(z,{label:a(o)("home.screenDialog.column2")},{default:e(t=>[l(h,{type:"danger",size:"small",onClick:G=>hl(t.row.screenName)},{default:e(()=>[u(n(a(o)("home.screenDialog.stop")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Ne,xe.value]])]),_:1},8,["modelValue"]),l(ie,{modelValue:fe.value,"onUpdate:modelValue":s[24]||(s[24]=t=>fe.value=t),width:"60%"},{default:e(()=>[i("div",Tt,[i("div",St,n(a(o)("home.customConnectionCodeTip")),1),i("div",Ut,n(a(o)("home.customConnectionCodeTip2")),1),l(A,{gutter:20},{default:e(()=>[l(F,{span:16},{default:e(()=>[l(te,{modelValue:D.value.ip,"onUpdate:modelValue":s[22]||(s[22]=t=>D.value.ip=t),placeholder:a(o)("home.ip")},null,8,["modelValue","placeholder"])]),_:1}),l(F,{span:8},{default:e(()=>[l(te,{modelValue:D.value.port,"onUpdate:modelValue":s[23]||(s[23]=t=>D.value.port=t),modelModifiers:{number:!0},type:"number",placeholder:a(o)("home.port")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),i("div",Nt,[l(h,{type:"danger",onClick:rl},{default:e(()=>[u(n(a(o)("home.clear")),1)]),_:1}),l(h,{type:"primary",onClick:ul},{default:e(()=>[u(n(a(o)("home.submit")),1)]),_:1})])])]),_:1},8,["modelValue"]),l(ie,{modelValue:ee.value,"onUpdate:modelValue":s[30]||(s[30]=t=>ee.value=t)},{header:e(()=>[u(n(a(o)("home.quickCmd.openButton")),1)]),footer:e(()=>[l(h,{onClick:s[29]||(s[29]=t=>ee.value=!1)},{default:e(()=>[u(n(a(o)("home.quickCmd.cancel")),1)]),_:1}),l(h,{type:"primary",onClick:kl},{default:e(()=>[u(n(a(o)("home.quickCmd.insert")),1)]),_:1})]),default:e(()=>[i("div",Pt,[l(A,null,{default:e(()=>[l(Sl,{modelValue:j.value,"onUpdate:modelValue":s[25]||(s[25]=t=>j.value=t)},{default:e(()=>[l(Oe,{value:"player"},{default:e(()=>[u(n(c.value==="zh"?"玩家":"Player"),1)]),_:1}),l(Oe,{value:"world"},{default:e(()=>[u(n(c.value==="zh"?"世界":"World"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(A,{class:"mt-16px"},{default:e(()=>[(r(!0),x(M,null,K(v.value.players,t=>(r(),p(w,{effect:"light",placement:"top","show-after":200,content:c.value==="zh"?`点击可快速插入UID: ${t.uid}`:`Click to insert player's UID: ${t.uid}`},{default:e(()=>[l(h,{link:"",type:"primary",disabled:j.value==="world",onClick:G=>V.value=t.uid},{default:e(()=>[u(n(t.nickName),1)]),_:2},1032,["disabled","onClick"])]),_:2},1032,["content"]))),256))]),_:1}),l(A,{class:"mt-16px"},{default:e(()=>[l(te,{modelValue:V.value,"onUpdate:modelValue":s[26]||(s[26]=t=>V.value=t),disabled:j.value==="world",placeholder:a(o)("home.quickCmd.uid"),clearable:""},null,8,["modelValue","disabled","placeholder"])]),_:1}),l(A,{class:"mt-16px"},{default:e(()=>[l(re,{modelValue:$.value,"onUpdate:modelValue":s[27]||(s[27]=t=>$.value=t),disabled:j.value==="world"||V.value==="",placeholder:a(o)("home.quickCmd.player"),filterable:"",onChange:gl,clearable:""},{default:e(()=>[(r(),x(M,null,K(yl,t=>l(ue,{label:c.value==="zh"?t.label.zh:t.label.en,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1}),l(A,{class:"mt-16px"},{default:e(()=>[l(re,{modelValue:E.value,"onUpdate:modelValue":s[28]||(s[28]=t=>E.value=t),disabled:j.value==="player",placeholder:a(o)("home.quickCmd.world"),filterable:"",onChange:Cl,clearable:""},{default:e(()=>[(r(),x(M,null,K(bl,t=>l(ue,{label:c.value==="zh"?t.label.zh:t.label.en,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1}),I.value&&($.value>=0||E.value>=0)?(r(),p(A,{key:0,class:"mt-16px"},{default:e(()=>[i("div",$t,[u(n(c.value==="zh"?"预览：":"preview: ")+" ",1),l(Ul,{type:"primary"},{default:e(()=>[u(n(I.value),1)]),_:1})])]),_:1})):g("",!0)])]),_:1},8,["modelValue"]),l(Ll,{modelValue:a(m).needTour,"onUpdate:modelValue":s[31]||(s[31]=t=>a(m).needTour=t)},{default:e(()=>[l(Y,{title:a(o)("home.tour.one.title")},{default:e(()=>[i("div",qt,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l(Nl)]),_:1}),i("span",null,n(a(o)("home.tour.one.desc")),1)])]),_:1},8,["title"]),l(Y,{target:"#tourUser",title:a(o)("home.tour.two.title")},{default:e(()=>[i("div",Ft,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l(Pl)]),_:1}),i("span",null,n(a(o)("home.tour.two.desc")),1)])]),_:1},8,["title"]),l(Y,{target:"#tourClusterSelect",title:a(o)("home.tour.three.title")},{default:e(()=>[i("div",At,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l($l)]),_:1}),i("span",null,n(a(o)("home.tour.three.desc")),1)])]),_:1},8,["title"]),l(Y,{target:"#tourDocs",title:a(o)("home.tour.four.title")},{default:e(()=>[i("div",Lt,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l(ql)]),_:1}),i("span",null,n(a(o)("home.tour.four.desc")),1)])]),_:1},8,["title"]),l(Y,{target:"#tourGithub",title:a(o)("home.tour.five.title")},{default:e(()=>[i("div",Mt,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l(Fl)]),_:1}),i("span",null,n(a(o)("home.tour.five.desc")),1)])]),_:1},8,["title"]),l(Y,{title:a(o)("home.tour.six.title")},{default:e(()=>[i("div",Bt,[l(C,{style:{"margin-right":"5px"}},{default:e(()=>[l(Al)]),_:1}),i("span",null,n(a(o)("home.tour.six.desc")),1)])]),_:1},8,["title"])]),_:1},8,["modelValue"])])}}},Wt=Ml(Et,[["__scopeId","data-v-4e26e5e6"]]);export{Wt as default};
