import{_ as Z,o as ee,r as m,L as F,c as A,u as se,g as le,M as ae,N as te,d as oe,O as B,P as q,Q as $,f as V,i as re,l as e,m as l,n as a,R as ne,S as ie,j as i,t as d,y as de,T as ue,U as me,s as pe,q as U,p as v,v as ge,V as ce,G as fe,B as K,J as p,K as _e,W as ve,X as we,Y as xe,Z as be}from"./index-CnGsCQVR.js";import{S as j}from"./tools-CmP39zM0.js";import{S as ye}from"./index-_xIMJ1eH.js";const he={class:"h-full"},Ve={class:"absolute top-10px right-10px flex flex-items-center"},ke={class:"absolute text-center select-none"},Se={class:"font-bold text-3xl chroma-text mb-6px text-center <lg:text-2xl <md:hidden"},Re={class:"chroma-text text-lg text-center <md:hidden"},Te={style:{"margin-bottom":"-50px"}},Fe={class:"flex items-center"},qe={class:"ml-6px font-bold text-xl"},$e={class:"flex items-center space-x-3 text-gray-400 mt-16px mb-16px"},Ue={class:"text-center"},Me={class:"tip"},Le={class:"tip_error"},Ne={class:"el-form-item-msg"},Ce={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},De={__name:"index",setup(Ae){ee(()=>{C()});const k=m(F.loginTitle);k.value=A(()=>ce(S.language,F.loginTitle,F.loginEnTitle));const{t}=se(),S=le(),w=ae(),I=te(),E=oe(),M=fe(),O=B("images/logo/logo.svg"),P=B("images/login/bg.png"),R=m(),x=m(!1),g=q({username:"",password:""}),G=A(()=>S.language==="en"?q({username:[{required:!0,message:"The user name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"The password cannot be empty",trigger:"blur"}]}):q({username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]})),L=()=>{R.value&&R.value.validate(async(r,s)=>{const f=j(g.password);if(r){x.value=!0;try{const _={username:g.username,password:f},u=await $.login.post({loginForm:_});if(K(u.message),w.setToken(u.data.token),w!=null&&w.token)await ve();else{we(S.language==="zh"?"登录失败":"Login Failed"),await M.replace(xe);return}await I.setTab([]),await E.setKeepAliveName([]),await M.replace(be)}catch{let u=1;setInterval(()=>{u--,u===0&&(x.value=!1)},1e3)}}})},b=m(!1),y=m(),o=m({username:"",nickname:"",role:"想什么呢",password:"",disabled:!1}),H={username:[{required:!0,message:t("profile.formValidateMsg.username")}],nickname:[{required:!0,message:t("profile.formValidateMsg.nickname")}],password:[{required:!0,message:t("profile.formValidateMsg.password")}],disabled:[{required:!0,message:t("profile.formValidateMsg.disabled")}]},W=()=>{o.value={username:"",nickname:"",password:""}},z=()=>{y.value&&y.value.clearValidate(),b.value=!0},T=m(!1),J=()=>{y.value.validate(r=>{if(r){T.value=!0;const s={role:"想什么呢",disabled:!1,username:o.value.username,nickname:o.value.nickname,password:j(o.value.password)};$.register.post(s).then(f=>{b.value=!1,K(f.message)}).finally(()=>{T.value=!1,C()})}})},N=m(!0),C=()=>{$.register.get().then(r=>{N.value=r.data})};return(r,s)=>{const f=p("el-image"),_=p("el-col"),u=p("el-input"),c=p("el-form-item"),h=p("el-button"),D=p("el-form"),Q=p("el-row"),X=p("el-dialog"),Y=_e("throttle");return V(),re("div",he,[e(Q,{class:"h-100%"},{default:l(()=>[a("div",Ve,[e(ne),e(ie)]),e(_,{lg:16,md:12,sm:15,xs:0,class:"flex items-center justify-center"},{default:l(()=>[s[7]||(s[7]=a("div",{class:"login-background w-85% h-100%"},null,-1)),a("div",ke,[e(f,{src:i(P),class:"w-400px h-360px mb-50px animate-float <md:hidden <lg:w-360px h-320px"},null,8,["src"]),a("div",Se,d(r.$t("login.welcome"))+" "+d(k.value),1),a("div",Re,d(r.$t("login.description")),1)])]),_:1}),e(_,{lg:8,md:12,sm:9,xs:24,class:"dark:bg-#161616 bg-gray-100 flex items-center justify-center flex-col"},{default:l(()=>[a("div",Te,[e(f,{src:i(O),style:{width:"200px"}},null,8,["src"])]),a("div",Fe,[a("div",qe,d(k.value),1)]),a("div",$e,[s[8]||(s[8]=a("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1)),a("span",Ue,d(r.$t("login.account")),1),s[9]||(s[9]=a("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1))]),e(D,{ref_key:"loginFormRef",ref:R,model:g,rules:G.value,"validate-on-rule-change":!1,class:"w-260px",onKeyup:de(L,["enter"])},{default:l(()=>[e(c,{prop:"username"},{default:l(()=>[e(u,{modelValue:g.username,"onUpdate:modelValue":s[0]||(s[0]=n=>g.username=n),placeholder:r.$t("login.loginName"),"prefix-icon":i(ue),type:"text"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),e(c,{prop:"password"},{default:l(()=>[e(u,{modelValue:g.password,"onUpdate:modelValue":s[1]||(s[1]=n=>g.password=n),placeholder:r.$t("login.password"),"prefix-icon":i(me),"show-password":"",type:"password"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),e(c,null,{default:l(()=>[x.value?(V(),U(h,{key:1,loading:x.value,round:"",type:"primary",style:{width:"100%"}},{default:l(()=>[v(d(r.$t("login.center")),1)]),_:1},8,["loading"])):pe((V(),U(h,{key:0,round:"",type:"primary",style:{width:"100%"}},{default:l(()=>[v(d(r.$t("login.in")),1)]),_:1})),[[Y,L,"3000"]])]),_:1}),e(c,{style:{"margin-top":"-3%"}},{default:l(()=>[N.value?ge("",!0):(V(),U(h,{key:0,round:"",onClick:z,style:{width:"100%"}},{default:l(()=>[v(d(i(t)("login.register")),1)]),_:1}))]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1}),e(X,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=n=>b.value=n),width:"60%",onClosed:W},{header:l(()=>[v(d(i(t)("login.register")),1)]),default:l(()=>[a("div",Me,d(i(t)("login.registerTip")),1),a("div",Le,d(i(t)("login.registerTip2")),1),e(D,{ref_key:"registerFormRef",ref:y,model:o.value,"label-width":"100",rules:H,"validate-on-rule-change":!1,style:{margin:"20px"}},{default:l(()=>[e(c,{label:i(t)("profile.username"),prop:"username"},{default:l(()=>[e(u,{modelValue:o.value.username,"onUpdate:modelValue":s[2]||(s[2]=n=>o.value.username=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{label:i(t)("profile.nickname"),prop:"nickname"},{default:l(()=>[e(u,{modelValue:o.value.nickname,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value.nickname=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{label:i(t)("profile.password"),prop:"password"},{default:l(()=>[e(u,{modelValue:o.value.password,"onUpdate:modelValue":s[4]||(s[4]=n=>o.value.password=n),autocomplete:"new-password","show-password":""},null,8,["modelValue"]),e(ye,{modelValue:o.value.password,"onUpdate:modelValue":s[5]||(s[5]=n=>o.value.password=n)},null,8,["modelValue"]),a("div",Ne,d(i(t)("profile.suggestedPassword")),1)]),_:1},8,["label"]),a("div",Ce,[e(h,{type:"primary",loading:T.value,onClick:J},{default:l(()=>[v(d(i(t)("profile.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ie=Z(De,[["__scopeId","data-v-3e30757e"]]);export{Ie as default};
